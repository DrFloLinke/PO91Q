<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Data Manipulation in R |  PO91Q: Fundamentals in Quantitative Research Methods –   Seminar Companion</title>
<meta name="generator" content="bookdown 0.43 with bs4_book()">
<meta property="og:title" content="Data Manipulation in R |  PO91Q: Fundamentals in Quantitative Research Methods –   Seminar Companion">
<meta property="og:type" content="book">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Data Manipulation in R |  PO91Q: Fundamentals in Quantitative Research Methods –   Seminar Companion">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/Lexend-0.4.10/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.9.0/transition.js"></script><script src="libs/bs3compat-0.9.0/tabs.js"></script><script src="libs/bs3compat-0.9.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
          margin-bottom: 0em;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="style.css">
<meta name="description" content="Self-Reflection Questions – Group Work Why is it good practice to always use an RScript, rather than simply entering your commands into the console in R? Give an example of an unordered factor...">
<meta property="og:description" content="Self-Reflection Questions – Group Work Why is it good practice to always use an RScript, rather than simply entering your commands into the console in R? Give an example of an unordered factor...">
<meta name="twitter:description" content="Self-Reflection Questions – Group Work Why is it good practice to always use an RScript, rather than simply entering your commands into the console in R? Give an example of an unordered factor...">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title=""><p><img src="images/Crest_white.png" width="75" style="display:block; margin:auto; margin-bottom:3em;"> PO91Q: Fundamentals in Quantitative Research Methods – <br> Seminar Companion</p></a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Preface</a></li>
<li><a class="" href="companion-features.html">Companion Features</a></li>
<li><a class="" href="accessibility.html">Accessibility</a></li>
<li class="book-part">Week 1</li>
<li><a class="" href="introduction-to-r.html">Introduction to R</a></li>
<li><a class="" href="exercises.html">Exercises</a></li>
<li><a class="" href="homework-for-week-2.html">Homework for Week 2</a></li>
<li><a class="" href="glossary.html">Glossary</a></li>
<li><a class="" href="flashcards.html">Flashcards</a></li>
<li class="book-part">Week 2</li>
<li><a class="active" href="data-manipulation-in-r.html">Data Manipulation in R</a></li>
<li><a class="" href="exercises-2.html">Exercises</a></li>
<li><a class="" href="homework-for-week-3.html">Homework for Week 3</a></li>
<li><a class="" href="glossary-1.html">Glossary</a></li>
<li><a class="" href="flashcards-1.html">Flashcards</a></li>
<li class="book-part">Week 3</li>
<li><a class="" href="foundations-of-statistical-inference.html">Foundations of Statistical Inference</a></li>
<li><a class="" href="exercises-3.html">Exercises8</a></li>
<li><a class="" href="homework-for-week-4.html">Homework for Week 4</a></li>
<li><a class="" href="glossary-2.html">Glossary</a></li>
<li><a class="" href="flashcards-2.html">Flashcards</a></li>
<li class="book-part">Week 4</li>
<li><a class="" href="confidence-intervals.html">Confidence Intervals</a></li>
<li><a class="" href="exercises-4.html">Exercises</a></li>
<li><a class="" href="homework-for-week-5.html">Homework for Week 5</a></li>
<li><a class="" href="glossary-3.html">Glossary</a></li>
<li><a class="" href="flashcards-3.html">Flashcards</a></li>
<li class="book-part">Week 5</li>
<li><a class="" href="causality-and-consolidation.html">Causality and Consolidation</a></li>
<li><a class="" href="homework-for-week-7.html">Homework for Week 7</a></li>
<li><a class="" href="glossary-4.html">Glossary</a></li>
<li><a class="" href="flashcards-4.html">Flashcards</a></li>
<li class="book-part">Week 6</li>
<li><a class="" href="reading-week.html">Reading Week</a></li>
<li class="book-part">Week 7</li>
<li><a class="" href="methods-methods-methods.html">Methods, Methods, Methods</a></li>
<li><a class="" href="bivariate-methods.html">Bivariate Methods</a></li>
<li><a class="" href="homework-for-week-8.html">Homework for Week 8</a></li>
<li><a class="" href="glossary-5.html">Glossary</a></li>
<li><a class="" href="flashcards-5.html">Flashcards</a></li>
<li class="book-part">Week 8</li>
<li><a class="" href="mmm-bivariate-regression.html">MMM – Bivariate Regression</a></li>
<li><a class="" href="mmm-model-fit.html">MMM – Model Fit</a></li>
<li><a class="" href="mmm-significance-testing.html">MMM – Significance Testing</a></li>
<li><a class="" href="bivariate-regression.html">Bivariate Regression</a></li>
<li><a class="" href="case-study-1.html">Case Study16</a></li>
<li><a class="" href="homework-for-week-9.html">Homework for Week 9</a></li>
<li><a class="" href="glossary-6.html">Glossary</a></li>
<li><a class="" href="flashcards-6.html">Flashcards</a></li>
<li class="book-part">Week 9</li>
<li><a class="" href="methods-methods-methods-1.html">Methods, Methods, Methods</a></li>
<li><a class="" href="multiple-regression.html">Multiple Regression</a></li>
<li><a class="" href="homework-for-week-10.html">Homework for Week 10</a></li>
<li><a class="" href="glossary-7.html">Glossary</a></li>
<li><a class="" href="flashcards-7.html">Flashcards</a></li>
<li class="book-part">Week 10</li>
<li><a class="" href="methods-methods-methods-2.html">Methods, Methods, Methods</a></li>
<li><a class="" href="variable-transformations-and-exam-preparation.html">Variable Transformations and Exam Preparation</a></li>
<li><a class="" href="homework.html">Homework</a></li>
<li><a class="" href="glossary-8.html">Glossary</a></li>
<li><a class="" href="flashcards-8.html">Flashcards</a></li>
<li class="book-part">Downloads</li>
<li><a class="" href="downloads.html">Downloads</a></li>
<li class="book-part">Glossary</li>
<li><a class="" href="glossary-9.html">Glossary</a></li>
<li class="book-part">List of References</li>
<li><a class="" href="list-of-references.html">List of References</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><script src="sidebar-link.js"></script><div id="data-manipulation-in-r" class="section level1 unnumbered">
<h1>Data Manipulation in R<a class="anchor" aria-label="anchor" href="#data-manipulation-in-r"><i class="fas fa-link"></i></a>
</h1>
<div id="self-reflection-questions-group-work" class="section level2 unnumbered">
<h2>Self-Reflection Questions – Group Work<a class="anchor" aria-label="anchor" href="#self-reflection-questions-group-work"><i class="fas fa-link"></i></a>
</h2>
<ol style="list-style-type: decimal">
<li>Why is it good practice to always use an RScript, rather than simply entering your commands into the console in R?</li>
<li>Give an example of an unordered factor variable and an ordered one.</li>
<li>Why are descriptive statistics useful?</li>
<li>Give an example of a situation where you would need to transform a character variable into a factor variable.</li>
<li>Why should you always create a new variable, instead of overwriting an existing one?<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;These questions are taken from &lt;span class="citation"&gt;Reiche (forthcoming)&lt;/span&gt;.&lt;/p&gt;'><sup>4</sup></a>
</li>
</ol>
<p><br></p>
<p>I do not usually provide answers to these questions, as I am expecting you to either attend the seminar, or – in case you cannot make it – to contact me for advice or to share notes with another student. But I have nonetheless put this document together, so that you get an idea about my expectation horizon for answering these. Please bear this in mind in weeks to come.</p>
<p><a class="delayed-download btn btn-primary disabled" role="button" aria-disabled="true" data-path="files/Downloads/Week 2/PO91Q_Self-Reflection_Week-2.pdf" data-date="2025-10-15" data-label='&lt;img src="images/file.png" class="icon-img" alt="icon"&gt; Answers to Self-Reflection Questions (available from October 15)'>
<img src="images/file.png" class="icon-img" alt="icon"> Answers to Self-Reflection Questions (available from October 15)
</a></p>
<p> </p>
<div style="display:none;">
<div class="float">
<embed src="files/Downloads/Week%202/PO91Q_Self-Reflection_Week-2.pdf"></embed><div class="figcaption">hidden</div>
</div>
</div>
<div class="stop">
<p>Please stop here and don’t go beyond this point until we have compared notes on your answers.</p>
</div>
<hr>
</div>
<div id="opening-your-data-set" class="section level2 unnumbered">
<h2>Opening your Data Set<a class="anchor" aria-label="anchor" href="#opening-your-data-set"><i class="fas fa-link"></i></a>
</h2>
<p>We are now ready to open a data set in R - where it is called a “data frame”. For this, we create a new object <code>EU</code>, and ask R to read “Sheet 1”” of the Excel file “EU.xlsx” which we placed in the working directory earlier</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readxl.tidyverse.org">readxl</a></span><span class="op">)</span></span>
<span><span class="va">EU</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span><span class="st">"EU.xlsx"</span>, sheet<span class="op">=</span><span class="st">"Sheet1"</span><span class="op">)</span></span></code></pre></div>
<p>We can now use our data in R!</p>
<div class="video">
<p><strong>Loading the Data Set</strong></p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/MCScLgUH3x4?si=_kbSBL-s7cSCMouY" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen>
</iframe>
</div>
<div class="warning">
<p>Please do not use the “Import Dataset” button in the Environment, but do this properly, manually. We sometimes need to set options for importing data sets, and the “pointy, clicky” approach won’t be able to offer you what you need.</p>
</div>
<hr>
</div>
<div id="viewing-the-data" class="section level2 unnumbered">
<h2>Viewing the Data<a class="anchor" aria-label="anchor" href="#viewing-the-data"><i class="fas fa-link"></i></a>
</h2>
<p>Unless you have been cheeky and opened the file in Excel to have a look, you have no idea yet, what the data look like. So it’s a good idea to view the data frame before doing anything with it. You can use the <code><a href="https://rdrr.io/r/utils/View.html">View()</a></code> command to see the data frame:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/View.html">View</a></span><span class="op">(</span><span class="va">EU</span><span class="op">)</span></span></code></pre></div>
<p>If you only want to see the first 6 observations of each variable, use the <code><a href="https://rdrr.io/r/utils/head.html">head()</a></code> command:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">EU</span><span class="op">)</span></span></code></pre></div>
<pre><code># A tibble: 6 × 5
  country     pop18 access   area GDP_2015
  &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;
1 Belgium  11413058   1951  30280  4.66e11
2 Bulgaria  7050034   2007 108560  1.22e11
3 Czechia  10610055   2004  77230  3.19e11
4 Denmark   5781190   1973  42430  2.46e11
5 Germany  82850000   1951 348540  3.60e12
6 Estonia   1319133   2004  42390  3.51e10</code></pre>
<p>If you simply want to know the variable names in the data frame, type:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">EU</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "country"  "pop18"    "access"   "area"     "GDP_2015"</code></pre>
<p>The next one is a very important command, because it reveals not only the variable names and their first few observations, but also the nature of each variable (numerical, character, etc.). It is the <code><a href="https://rdrr.io/r/utils/str.html">str()</a></code> command, where “str” stands for structure:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">EU</span><span class="op">)</span></span></code></pre></div>
<pre><code>tibble [28 × 5] (S3: tbl_df/tbl/data.frame)
 $ country : chr [1:28] "Belgium" "Bulgaria" "Czechia" "Denmark" ...
 $ pop18   : num [1:28] 11413058 7050034 10610055 5781190 82850000 ...
 $ access  : num [1:28] 1951 2007 2004 1973 1951 ...
 $ area    : num [1:28] 30280 108560 77230 42430 348540 ...
 $ GDP_2015: num [1:28] 4.66e+11 1.22e+11 3.19e+11 2.46e+11 3.60e+12 ...</code></pre>
<p>You can see that R has recognised most variables as numerical, one is displayed as a character variable. This is appropriate for some variables, such as <code>pop18</code>, but not for the ordinal variable <code>access</code> which is ordinal. We need to recode it, and all other variables we are unhappy with.</p>
<hr>
</div>
<div id="variable-types-in-r" class="section level2 unnumbered">
<h2>Variable Types in R<a class="anchor" aria-label="anchor" href="#variable-types-in-r"><i class="fas fa-link"></i></a>
</h2>
<p>R distinguishes between a number of different variable types and here is a broad overview of them. This will help you in deciding which descriptive statistics to calculate, or into which variable type you need to recode (next step) to achieve what you want. There are two general types:</p>
<ol style="list-style-type: decimal">
<li>
<code>numeric</code> – numbers</li>
<li>
<code>character</code> (also called string) – letters</li>
</ol>
<p>Within <code>numeric</code> we can distinguish between the following:</p>
<ul>
<li>
<code>factor</code> - nominal</li>
<li>
<code>ordered factor</code> - ordinal</li>
<li>
<code>integer</code> - numeric, but only “whole” numbers (discrete)</li>
<li>
<code>numeric</code> - any number (interval or ratio)</li>
</ul>
<p>Numerical variables are already in the data set, we have to attend to nominal and ordinal variables.</p>
<div id="nominal-variables" class="section level3 unnumbered">
<h3>Nominal Variables<a class="anchor" aria-label="anchor" href="#nominal-variables"><i class="fas fa-link"></i></a>
</h3>
<p>In terms of the variable types we encountered in the lecture this week, the country name is a nominal variable. So we need to tell R to turn this into a factor variable. We do this as follows:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">EU</span><span class="op">$</span><span class="va">country</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">EU</span><span class="op">$</span><span class="va">country</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="ordinal-variables" class="section level3 unnumbered">
<h3>Ordinal Variables<a class="anchor" aria-label="anchor" href="#ordinal-variables"><i class="fas fa-link"></i></a>
</h3>
<p>As mentioned above, the variable <code>access</code> should be ordinal, and therefore has to be turned into an ordered factor. The command which follows is almost identical to producing a factor variable, only that we add the option <code>ordered = TRUE</code> at the end:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">EU</span><span class="op">$</span><span class="va">access_fac</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">EU</span><span class="op">$</span><span class="va">access</span>, ordered <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>If you are familiar with European Studies, you will know that each accession wave has got a particular name. The 1973 enlargement, for example, is called the “First Enlargement”, the 1981 wave the Mediterranean Enlargement, and so forth. Let us create a new variable which uses these names instead of the years.</p>
<p>This process is a little more involved, and requires a new package to be installed and loaded: <code>dplyr</code>. This package is part of the so-called <code>tidyverse</code> which is a suite of packages designed to make working with R simpler and commands shorter. You can install all of them by calling <code>install.packages("tidyverse")</code>. We then load the <code>tidyverse</code> with:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span></code></pre></div>
<p>The command which follows takes a little explaining. We start by stating the dataframe we wish to assign the result to, <code>EU</code>. Then we name the data frame that contains the data we wish to manipulate, here also <code>EU</code>. The symbol which follows, <code>\%&gt;\%</code>, reads as “and then”, and is called a “pipe”. So we take the data frame <code>EU</code> “and then” carry out a function called <code>mutate</code>. It creates a new variable called <code>wave</code> by recoding the variable <code>access_fac</code>. The command then specifies all categories of the “old” variable <code>access_fac</code> and what their respective values in the “new” variable <code>wave</code> are going to be. The categories in each are set in quotation marks, as they are factor / character categories.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">EU</span> <span class="op">&lt;-</span> <span class="va">EU</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>wave <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/recode.html">recode</a></span><span class="op">(</span><span class="va">access_fac</span>, <span class="st">'1951'</span><span class="op">=</span><span class="st">"Founding"</span>, </span>
<span>                       <span class="st">'1973'</span><span class="op">=</span> <span class="st">"First"</span>,</span>
<span>                       <span class="st">'1981'</span><span class="op">=</span> <span class="st">"Mediterranean"</span>,</span>
<span>                       <span class="st">'1986'</span> <span class="op">=</span> <span class="st">"Mediterranean"</span>,</span>
<span>                       <span class="st">'1995'</span> <span class="op">=</span> <span class="st">"Cold War"</span>,</span>
<span>                       <span class="st">'2004'</span> <span class="op">=</span> <span class="st">"Eastern"</span>,</span>
<span>                       <span class="st">'2007'</span> <span class="op">=</span> <span class="st">"Eastern"</span>,</span>
<span>                       <span class="st">'2013'</span> <span class="op">=</span> <span class="st">"Balkans"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Please note that some colleagues in the department object to the use of the <code>tidyverse</code> as a “dialect” of R, and require you to use base R in their modules. However, on this module I am still using the <code>tidyverse</code>, as:</p>
<ul>
<li>my textbook, which is going to be the main textbook for this module from 2026, uses the <code>tidyverse</code>, and I think it is pedagogically wrong to divert from the main text in my seminars</li>
<li>I do not think it makes sense to exclude <em>one</em> of currently 22,505 packages<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://cran.r-project.org/web/packages/" class="uri"&gt;https://cran.r-project.org/web/packages/&lt;/a&gt;&lt;/p&gt;'><sup>5</sup></a>
</li>
<li>
<code>GGPLOT2</code> which is part of the <code>tidyverse</code> simplifies code for generating figures significantly and will do for all but the most specific requirements</li>
<li>a lot of support on <a href="https://stackexchange.com/">stackexchange</a> is geared toward the <code>tidyverse</code> as a lot of US-based data scientists work with this package, and so you will find it easier to solve problems</li>
</ul>
<p>But to keep everybody happy, I am providing the base R code whenever possible in a collapsible section like this one:</p>
<div class="baser">
<details><summary>
Base R Solution
</summary><div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">EU</span><span class="op">$</span><span class="va">wave</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span><span class="va">EU</span><span class="op">$</span><span class="va">wave</span><span class="op">[</span><span class="va">EU</span><span class="op">$</span><span class="va">access_fac</span><span class="op">==</span><span class="st">'1951'</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Founding"</span></span>
<span><span class="va">EU</span><span class="op">$</span><span class="va">wave</span><span class="op">[</span><span class="va">EU</span><span class="op">$</span><span class="va">access_fac</span><span class="op">==</span><span class="st">'1973'</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"First"</span></span>
<span><span class="va">EU</span><span class="op">$</span><span class="va">wave</span><span class="op">[</span><span class="va">EU</span><span class="op">$</span><span class="va">access_fac</span><span class="op">==</span><span class="st">'1981'</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Mediterranean"</span></span>
<span><span class="va">EU</span><span class="op">$</span><span class="va">wave</span><span class="op">[</span><span class="va">EU</span><span class="op">$</span><span class="va">access_fac</span><span class="op">==</span><span class="st">'1986'</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Mediterranean"</span></span>
<span><span class="va">EU</span><span class="op">$</span><span class="va">wave</span><span class="op">[</span><span class="va">EU</span><span class="op">$</span><span class="va">access_fac</span><span class="op">==</span><span class="st">'1995'</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Cold War"</span></span>
<span><span class="va">EU</span><span class="op">$</span><span class="va">wave</span><span class="op">[</span><span class="va">EU</span><span class="op">$</span><span class="va">access_fac</span><span class="op">==</span><span class="st">'2004'</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Eastern"</span></span>
<span><span class="va">EU</span><span class="op">$</span><span class="va">wave</span><span class="op">[</span><span class="va">EU</span><span class="op">$</span><span class="va">access_fac</span><span class="op">==</span><span class="st">'2007'</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Eastern"</span></span>
<span><span class="va">EU</span><span class="op">$</span><span class="va">wave</span><span class="op">[</span><span class="va">EU</span><span class="op">$</span><span class="va">access_fac</span><span class="op">==</span><span class="st">'2013'</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Balkans"</span></span>
<span></span>
<span><span class="va">EU</span><span class="op">$</span><span class="va">wave</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">EU</span><span class="op">$</span><span class="va">wave</span>, ordered <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
Here, we first create a new, empty variable called <code>wave</code> in the <code>EU</code> data set. We then create new values , for example <code>Founding</code> in the variable <code>EU$wave</code> for the condition (this is what the square brackets <code>[ ]</code> do) that the variable <code>access_fac</code> in the <code>EU</code> data set, equals a specific value. For <code>Founding</code> this is is <code>1951</code>. The last step is to turn the <code>wave</code> variable into an ordered factor.
</details>
</div>
<p>But back to the recoding exercise itself. Please note that the original variable <code>access_fac</code> was already an ordered factor. Therefore, R (or the <code>mutate</code> function to be precise) also returns <code>wave</code> as an ordered factor. Had <code>access_fac</code> been an unordered factor (aka nominal variable), <code>wave</code> would also have been an unorderd factor. You can specify in an option to the <code>mutate</code> function whether you want the factor to be ordered or not:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">EU</span> <span class="op">&lt;-</span> <span class="va">EU</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>wave <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/recode.html">recode</a></span><span class="op">(</span><span class="va">access_fac</span>, <span class="st">'1951'</span><span class="op">=</span><span class="st">"Founding"</span>, </span>
<span>                       <span class="st">'1973'</span><span class="op">=</span> <span class="st">"First"</span>,</span>
<span>                       <span class="st">'1981'</span><span class="op">=</span> <span class="st">"Mediterranean"</span>,</span>
<span>                       <span class="st">'1986'</span> <span class="op">=</span> <span class="st">"Mediterranean"</span>,</span>
<span>                       <span class="st">'1995'</span> <span class="op">=</span> <span class="st">"Cold War"</span>,</span>
<span>                       <span class="st">'2004'</span> <span class="op">=</span> <span class="st">"Eastern"</span>,</span>
<span>                       <span class="st">'2007'</span> <span class="op">=</span> <span class="st">"Eastern"</span>,</span>
<span>                       <span class="st">'2013'</span> <span class="op">=</span> <span class="st">"Balkans"</span><span class="op">)</span>, ordered<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><code>access</code> only had a handful of numbers, and it turned out that each numerical value of this variable turned into a category in the new one. But often you have to recode variables of a more continuous nature into categories. Suppose, for example, we have the variable <code>age</code> which contains the age of respondents in a survey. If we wanted to recode this into categories such as 20-25, 26-35, etc., it would be tedious to assign a category to each individual value of <code>age</code>. This is where the <code><a href="https://rdrr.io/r/base/cut.html">cut()</a></code> function comes in handy, as it literally cuts up a variable into chunks at the points we specify. Let’s apply this to the <code>access</code> variable.</p>
<p>Again, we use the <code>mutate</code> function, this time naming our new variable <code>wave1</code> (so as not to overwrite the <code>wave</code> variable we created with the <code><a href="https://dplyr.tidyverse.org/reference/recode.html">recode()</a></code> function). The <code><a href="https://rdrr.io/r/base/cut.html">cut()</a></code> function splits a numeric variable into intervals using the <code>breaks</code> we specify in the function. Importantly, these intervals are left-open and right-closed. This means that each interval includes its upper boundary, but not the lower one. This sounds complicated, so let me give you an example. If, for example, we called</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cut.html">cut</a></span><span class="op">(</span><span class="va">x</span>, breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">30</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>then the first interval would start at 10 and include all values greater than 10 and up to and including 20. The next interval would contain all values that are larger than 20 and up to and including 30.</p>
<p>When we apply this to our <code>access</code> variable, we therefore need to specify the breaks as follows:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="data-manipulation-in-r.html#cb31-1" tabindex="-1"></a><span class="fu">cut</span>(access, <span class="at">breaks=</span><span class="fu">c</span>(<span class="dv">1950</span>, <span class="dv">1951</span>, <span class="dv">1973</span>, <span class="dv">1986</span>, <span class="dv">1995</span>, <span class="dv">2007</span>, <span class="dv">2013</span>), </span></code></pre></div>
<p>The first category (<code>Founding</code>) thus contains all years up to and including 1951, the next category (<code>First</code>), all years larger than 1951 and up to and including 1973, and so forth. Having created these categories (or <code>levels</code> in R terminology), we can then label them accordingly with <code>labels</code>.</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">EU</span> <span class="op">&lt;-</span> <span class="va">EU</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>wave1<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/cut.html">cut</a></span><span class="op">(</span><span class="va">access</span>, </span>
<span>                  breaks<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1950</span>, <span class="fl">1951</span>, <span class="fl">1973</span>, <span class="fl">1986</span>, <span class="fl">1995</span>, <span class="fl">2007</span>, <span class="fl">2013</span><span class="op">)</span>, </span>
<span>                  labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Founding"</span>,<span class="st">"First"</span>,</span>
<span>                           <span class="st">"Mediterranean"</span>, </span>
<span>                           <span class="st">"Cold War"</span>, </span>
<span>                           <span class="st">"Eastern"</span>, </span>
<span>                           <span class="st">"Balkans"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> </span></code></pre></div>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">EU</span><span class="op">$</span><span class="va">wave</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "Founding"      "First"         "Mediterranean" "Cold War"      "Eastern"       "Balkans"      </code></pre>
<div class="baser">
<details><summary>
Base R Solution
</summary><div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">EU</span><span class="op">$</span><span class="va">wave</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cut.html">cut</a></span><span class="op">(</span><span class="va">EU</span><span class="op">$</span><span class="va">access</span>, </span>
<span>                  breaks<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1950</span>, <span class="fl">1951</span>, <span class="fl">1973</span>, <span class="fl">1986</span>, <span class="fl">1995</span>, <span class="fl">2007</span>, <span class="fl">2013</span><span class="op">)</span>, </span>
<span>                  labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Founding"</span>,<span class="st">"First"</span>,</span>
<span>                           <span class="st">"Mediterranean"</span>, </span>
<span>                           <span class="st">"Cold War"</span>, </span>
<span>                           <span class="st">"Eastern"</span>, </span>
<span>                           <span class="st">"Balkans"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</details>
</div>
<div class="video">
<p><strong>Recoding a Factor Variable</strong></p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/9_5IeNL3VP8?si=xVrgNuWG0L9kDZNo" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen>
</iframe>
</div>
<div class="video">
<p><strong>Recoding Ordered Factor Variables</strong></p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/_WfmZprErV0?si=F6rRSJAkCvqBe_AT" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen>
</iframe>
</div>
</div>
<div id="binary-dummy" class="section level3 unnumbered">
<h3>Binary Dummy<a class="anchor" aria-label="anchor" href="#binary-dummy"><i class="fas fa-link"></i></a>
</h3>
<p>Very often in political science we have yes/no scenarios, such as democracy yes or no, civil war, yes or no, etc. To analyse these scenarios, we can create so-called “dummy variables”. In the present example, let’s specify for each country whether it has been a founding member of the EU. It is a factor variable and so we do could do this exactly the same way as our initial recoding of the wave variable above:</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">EU</span> <span class="op">&lt;-</span> <span class="va">EU</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>founding <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/recode.html">recode</a></span><span class="op">(</span><span class="va">access_fac</span>, <span class="st">'1951'</span><span class="op">=</span><span class="st">"Yes"</span>, </span>
<span>                       <span class="st">'1973'</span> <span class="op">=</span> <span class="st">"No"</span>,</span>
<span>                       <span class="st">'1981'</span> <span class="op">=</span> <span class="st">"No"</span>,</span>
<span>                       <span class="st">'1986'</span> <span class="op">=</span> <span class="st">"No"</span>,</span>
<span>                       <span class="st">'1995'</span> <span class="op">=</span> <span class="st">"No"</span>,</span>
<span>                       <span class="st">'2004'</span> <span class="op">=</span> <span class="st">"No"</span>,</span>
<span>                       <span class="st">'2007'</span> <span class="op">=</span> <span class="st">"No"</span>,</span>
<span>                       <span class="st">'2013'</span> <span class="op">=</span> <span class="st">"No"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>There is a much shorter way to do this, however, and shorter is always preferred in coding so long as it leads to the same result. We can apply the <code><a href="https://rdrr.io/r/base/ifelse.html">ifelse()</a></code> function which follows the rationale: <code>ifelse('condition', 'if condition met, then', 'otherwise')</code>. Here, if <code>access_fac=="1951"</code> we want to assign the value <code>"Yes"</code>, if not <code>"No"</code>:</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">EU</span> <span class="op">&lt;-</span> <span class="va">EU</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>founding <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">access_fac</span><span class="op">==</span><span class="st">"1951"</span>, <span class="st">"Yes"</span>, <span class="st">"No"</span><span class="op">)</span>, </span>
<span>                              levels <span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Yes"</span>, <span class="st">"No"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="baser">
<details><summary>
Base R Solution
</summary><p>Using <span style="color:black"><code>ifelse</code></span>, this is very similar, only the pipe disappears:</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">EU</span><span class="op">$</span><span class="va">founding</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">EU</span><span class="op">$</span><span class="va">access_fac</span><span class="op">==</span><span class="st">"1951"</span>, <span class="st">"Yes"</span>, <span class="st">"No"</span><span class="op">)</span>, </span>
<span>                              levels <span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Yes"</span>, <span class="st">"No"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</details>
</div>
<hr>
</div>
</div>
<div id="sub-setting-data" class="section level2 unnumbered">
<h2>Sub-Setting Data<a class="anchor" aria-label="anchor" href="#sub-setting-data"><i class="fas fa-link"></i></a>
</h2>
<p>When we start analysing data, we rarely need all data at the same time. We might not need some variables, at all, for example, or we only want to work with certain observations, such as those countries in the “founding” wave. In these cases, we can subset the data. I will show you some examples of subsetting now.</p>
<div id="by-variable" class="section level3 unnumbered">
<h3>By Variable<a class="anchor" aria-label="anchor" href="#by-variable"><i class="fas fa-link"></i></a>
</h3>
<p>If you are sure you won’t need a variable (remember, there is no back button), you can simply drop (i.e. delete) it. Let’s do this with the <code>area</code> variable:</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">EU</span><span class="op">$</span><span class="va">area</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span></code></pre></div>
<p>If we are dropping multiple variables, we can either perform this operation each time, or use another command which allows us to operate with multiple variables at the same time. The <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> command comes from the <code>tidyverse</code> package and specifies which variables we wish to keep:</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">EU_pop</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">EU</span>, <span class="va">country</span>, <span class="va">pop18</span>, <span class="va">access_fac</span>, <span class="va">founding</span><span class="op">)</span></span></code></pre></div>
<p>This creates a new data frame called <code>EU_pop</code> containing only the variables <code>country</code>, <code>pop18</code>, <code>access_fac</code>, and <code>founding</code>.</p>
<div class="baser">
<details><summary>
Base R Solution
</summary><p>The package documentation offers some <a href="https://dplyr.tidyverse.org/articles/base.html">basic instructions</a> how to convert the <span style="color:black"><code>tidyverse</code></span> (or <span style="color:black"><code>dyplyr</code></span>, to be precise) code into base R. But here is the solution for the previous code chunk:</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">EU_pop</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">EU</span>, <span class="va">country</span>, <span class="va">pop18</span>, <span class="va">access_fac</span>, <span class="va">founding</span><span class="op">)</span></span></code></pre></div>
</details>
</div>
<p>We can, however, use the same command and tell R which variables to drop by adding a minus sign in from of the variables we want to delete. The following command produces exactly the same result as the one before:</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">EU_pop1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">EU</span>, <span class="op">-</span><span class="va">access</span>, <span class="op">-</span><span class="va">GDP_2015</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="by-observation" class="section level3 unnumbered">
<h3>By Observation<a class="anchor" aria-label="anchor" href="#by-observation"><i class="fas fa-link"></i></a>
</h3>
<p>Instead of dropping and keeping variables, we can do the same thing to individual observations. Here, we use the <code><a href="https://dplyr.tidyverse.org/reference/slice.html">slice()</a></code> command (like a cake) and specify which slices we want to drop or keep. For example to drop the Benelux countries we would delete observations 1, 16 and 19:</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">EU_nobenelux</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="va">EU</span>, <span class="op">-</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">16</span>, <span class="op">-</span><span class="fl">19</span><span class="op">)</span></span></code></pre></div>
<div class="baser">
<details><summary>
Base R Solution
</summary><div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">EU_pop</span> <span class="op">&lt;-</span> <span class="va">EU</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">16</span>, <span class="op">-</span><span class="fl">19</span><span class="op">)</span>,<span class="op">]</span></span></code></pre></div>
</details>
</div>
<p>Alternatively, if we were only interested in Benelux countries we would subset to only those observations:</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">EU_benelux</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="va">EU</span>, <span class="fl">1</span>, <span class="fl">16</span>, <span class="fl">19</span><span class="op">)</span></span></code></pre></div>
<div class="baser">
<details><summary>
Base R Solution
</summary><div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">EU_pop</span> <span class="op">&lt;-</span> <span class="va">EU</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">16</span>, <span class="fl">19</span><span class="op">)</span>,<span class="op">]</span></span></code></pre></div>
</details>
</div>
</div>
<div id="keep-if-a-variable-has-a-certain-value" class="section level3 unnumbered">
<h3>Keep if a variable has a certain value<a class="anchor" aria-label="anchor" href="#keep-if-a-variable-has-a-certain-value"><i class="fas fa-link"></i></a>
</h3>
<p>One of the most useful commands is <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code>, as it allows us to keep all observations for which the value of a variable is of a particular number. For example if we wanted to conduct an analysis with all countries which have a population in excess of 10 million we could subset by:</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">EU_pop_large</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">EU</span>, <span class="va">pop18</span> <span class="op">&gt;</span> <span class="fl">10000000</span><span class="op">)</span></span></code></pre></div>
<div class="baser">
<details><summary>
Base R Solution
</summary><div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">EU_pop_large</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">EU</span>, <span class="va">pop18</span> <span class="op">&gt;</span> <span class="fl">10000000</span><span class="op">)</span></span></code></pre></div>
</details>
</div>
<p>Here is a list of some operators you can use for this purpose:</p>
<p> </p>
<div class="custom-html-table">
<div class="inline-table"><table style="width:45%; color: black; margin-left: auto; margin-right: auto;" class="table">
<thead><tr>
<th style="text-align:left;">
Operator
</th>
<th style="text-align:left;">
Description
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;min-width: 0.25in; ">
&lt;
</td>
<td style="text-align:left;">
less than
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 0.25in; ">
&lt;=
</td>
<td style="text-align:left;">
less than or equal to
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 0.25in; ">
&gt;
</td>
<td style="text-align:left;">
greater than
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 0.25in; ">
&gt;=
</td>
<td style="text-align:left;">
greater than or equal to
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 0.25in; ">
==
</td>
<td style="text-align:left;">
exactly equal to
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 0.25in; ">
!=
</td>
<td style="text-align:left;">
not equal to
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 0.25in; ">
!x
</td>
<td style="text-align:left;">
Not x
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 0.25in; ">
x | y
</td>
<td style="text-align:left;">
x OR y
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 0.25in; ">
x &amp; y
</td>
<td style="text-align:left;">
x AND y
</td>
</tr>
</tbody>
</table></div>
</div>
<p> </p>
<div class="video">
<p><strong>Subsetting Data</strong></p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/6lsmiXvWK-U?si=uizPzqBH5g5An6Ki" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen>
</iframe>
</div>
<hr>
</div>
</div>
<div id="ordering-data" class="section level2 unnumbered">
<h2>Ordering Data<a class="anchor" aria-label="anchor" href="#ordering-data"><i class="fas fa-link"></i></a>
</h2>
<p>The data set in its original state is purposely not ordered by any criterion, such as alphabetical order of countries, etc. But we can use R to do exactly that. Let us work with a subset containing only three variables:</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">EU_subset</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">EU</span>, <span class="va">country</span>, <span class="va">pop18</span>, <span class="va">access</span><span class="op">)</span></span></code></pre></div>
<p>It would be lovely if the command for ordering data would be called <code><a href="https://rdrr.io/r/base/order.html">order()</a></code>, but it is called <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code><a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;There is a command called &lt;code&gt;order()&lt;/code&gt;, but it is not part of the &lt;code&gt;tidyverse&lt;/code&gt;, and as this package is steadily on the rise in coding, I am only showing you this here.&lt;/p&gt;"><sup>6</sup></a>. Let’s order countries by ascending population in a new data frame called <code>eu_order</code>:</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">eu_order</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">EU_subset</span>, <span class="va">pop18</span><span class="op">)</span></span></code></pre></div>
<div class="baser">
<details><summary>
Base R Solution
</summary><div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">eu_order</span> <span class="op">&lt;-</span> <span class="va">EU_subset</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">EU_subset</span><span class="op">$</span><span class="va">pop18</span><span class="op">)</span>,<span class="op">]</span></span></code></pre></div>
</details>
</div>
<p>We can now display the first 10 rows with the following command:</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">eu_order</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,<span class="op">]</span></span></code></pre></div>
<pre><code># A tibble: 10 × 3
   country      pop18 access
   &lt;fct&gt;        &lt;dbl&gt;  &lt;dbl&gt;
 1 Malta       475701   2004
 2 Luxembourg  602005   1951
 3 Cyprus      864236   2004
 4 Estonia    1319133   2004
 5 Latvia     1934379   2004
 6 Slovenia   2066880   2004
 7 Lithuania  2808901   2004
 8 Croatia    4105493   2013
 9 Ireland    4838259   1973
10 Slovakia   5443120   2004</code></pre>
<p>The content in the brackets refers to the rows (before the comma), and to the columns (after the comma). As we only want certain rows and displaying all variables, I have left the space after the comma blank.</p>
<p>We can do the same thing in descending order by calling:</p>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">eu_order</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">EU_subset</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">pop18</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">eu_order</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,<span class="op">]</span></span></code></pre></div>
<pre><code># A tibble: 10 × 3
   country           pop18 access
   &lt;fct&gt;             &lt;dbl&gt;  &lt;dbl&gt;
 1 Germany        82850000   1951
 2 France         67221943   1951
 3 United Kingdom 66238007   1973
 4 Italy          60483973   1951
 5 Spain          46659302   1986
 6 Poland         37976687   2004
 7 Romania        19523621   2007
 8 Netherlands    17181084   1951
 9 Belgium        11413058   1951
10 Greece         10738868   1981</code></pre>
<div class="baser">
<details><summary>
Base R Solution
</summary><div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">eu_order</span> <span class="op">&lt;-</span> <span class="va">EU_subset</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">EU_subset</span><span class="op">$</span><span class="va">pop18</span><span class="op">)</span><span class="op">)</span>,<span class="op">]</span></span></code></pre></div>
</details>
</div>
<p>A neat feature of R is that it allows us to order observations by more than one variable. So for example, we could order them by ascending accession wave first, and then by ascending population in 2018 as follows:</p>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">eu_order</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">EU_subset</span>, <span class="va">access</span>, <span class="va">pop18</span><span class="op">)</span></span>
<span></span>
<span><span class="va">eu_order</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,<span class="op">]</span></span></code></pre></div>
<pre><code># A tibble: 10 × 3
   country           pop18 access
   &lt;fct&gt;             &lt;dbl&gt;  &lt;dbl&gt;
 1 Luxembourg       602005   1951
 2 Belgium        11413058   1951
 3 Netherlands    17181084   1951
 4 Italy          60483973   1951
 5 France         67221943   1951
 6 Germany        82850000   1951
 7 Ireland         4838259   1973
 8 Denmark         5781190   1973
 9 United Kingdom 66238007   1973
10 Greece         10738868   1981</code></pre>
<div class="baser">
<details><summary>
Base R Solution
</summary><div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">eu_order</span> <span class="op">&lt;-</span> <span class="va">EU_subset</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">EU_subset</span><span class="op">$</span><span class="va">access</span>,<span class="va">EU_subset</span><span class="op">$</span><span class="va">pop18</span><span class="op">)</span>,<span class="op">]</span></span>
<span></span>
<span><span class="co"># or slightly shorter </span></span>
<span></span>
<span><span class="va">eu_order</span> <span class="op">&lt;-</span> <span class="va">EU_subset</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/with.html">with</a></span><span class="op">(</span><span class="va">EU_subset</span>, <span class="va">access</span>,<span class="va">pop18</span><span class="op">)</span><span class="op">)</span>,<span class="op">]</span></span></code></pre></div>
</details>
</div>
<hr>
</div>
<div id="grouping-data" class="section level2 unnumbered">
<h2>Grouping Data<a class="anchor" aria-label="anchor" href="#grouping-data"><i class="fas fa-link"></i></a>
</h2>
<p>Looking at the last example, a question that might spring up is in which accession wave the joining countries brought the largest population increase on average to the EU. We can calculate summary statistics for a particular group by, well, grouping them. The first step is to group data into rows with the same value:</p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">eu_access</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">EU_subset</span>, <span class="va">access</span><span class="op">)</span></span></code></pre></div>
<p>By the way: whenever you have grouped anything, and finished analysing data in this grouped version it is essential that you ungroup the data afterwards, so that you don’t unintentionally keep using the groups:</p>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="va">EU_subset</span><span class="op">)</span></span></code></pre></div>
<pre><code># A tibble: 28 × 3
   country     pop18 access
   &lt;fct&gt;       &lt;dbl&gt;  &lt;dbl&gt;
 1 Belgium  11413058   1951
 2 Bulgaria  7050034   2007
 3 Czechia  10610055   2004
 4 Denmark   5781190   1973
 5 Germany  82850000   1951
 6 Estonia   1319133   2004
 7 Ireland   4838259   1973
 8 Greece   10738868   1981
 9 Spain    46659302   1986
10 France   67221943   1951
# ℹ 18 more rows</code></pre>
<p>But let’s calculate the average population size per accession wave in an elegant command which combines multiple steps by using pipes:</p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">eu_popaccess</span> <span class="op">&lt;-</span> <span class="va">EU_subset</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">access</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>avg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">pop18</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">eu_popaccess</span></span></code></pre></div>
<pre><code># A tibble: 8 × 2
  access       avg
   &lt;dbl&gt;     &lt;dbl&gt;
1   1951 39958677.
2   1973 25619152 
3   1981 10738868 
4   1986 28475164.
5   1995  8151880.
6   2004  7327746.
7   2007 13286828.
8   2013  4105493 </code></pre>
<div class="baser">
<details><summary>
Base R Solution
</summary><div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">eu_popaccess1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html">aggregate</a></span><span class="op">(</span><span class="va">pop18</span> <span class="op">~</span> <span class="va">access</span>, </span>
<span>                           data <span class="op">=</span> <span class="va">EU_subset</span>, </span>
<span>                           FUN <span class="op">=</span> <span class="va">mean</span> <span class="op">)</span></span></code></pre></div>
</details>
</div>
<p>You now see a new variable called <code>avg</code> which contains the average population increase for each wave. In which wave did the joining countries have the largest population on average?</p>
<hr>
</div>
<div id="combining-ordering-and-grouping-data" class="section level2 unnumbered">
<h2>Combining Ordering and Grouping Data<a class="anchor" aria-label="anchor" href="#combining-ordering-and-grouping-data"><i class="fas fa-link"></i></a>
</h2>
<p>The question was easy to answer here, as we only have a few accession waves. It starts to get unwieldy though, the more groups we have, but we can let R do the job by combining first grouping, and then ordering. So we take the grouped data frame <code>eu_popaccess</code> and order it by descending <code>avg</code>:</p>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">eu_popaccess_order</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">eu_popaccess</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">avg</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">eu_popaccess_order</span></span></code></pre></div>
<pre><code># A tibble: 8 × 2
  access       avg
   &lt;dbl&gt;     &lt;dbl&gt;
1   1951 39958677.
2   1986 28475164.
3   1973 25619152 
4   2007 13286828.
5   1981 10738868 
6   1995  8151880.
7   2004  7327746.
8   2013  4105493 </code></pre>
<div class="baser">
<details><summary>
Base R Solution
</summary><div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">eu_popaccess_order</span> <span class="op">&lt;-</span> <span class="va">eu_popaccess</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">eu_popaccess</span><span class="op">$</span><span class="va">avg</span><span class="op">)</span><span class="op">)</span>,<span class="op">]</span></span></code></pre></div>
</details>
</div>
<hr>
</div>
<div id="descriptive-statistics" class="section level2 unnumbered">
<h2>Descriptive Statistics<a class="anchor" aria-label="anchor" href="#descriptive-statistics"><i class="fas fa-link"></i></a>
</h2>
<p>We have covered quite a large number of descriptive statistics, so far. These are:</p>
<ul>
<li>Mean</li>
<li>Median<br>
</li>
<li>Mode</li>
<li>Standard Deviation</li>
<li>Variance</li>
<li>Quartiles and Percentiles</li>
<li>Range</li>
<li>Interquartile Range</li>
</ul>
<p>They are a lot of effort to calculate by hand, especially for larger data sets, but R can do these with a few intuitive commands. First up is the mean.</p>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">EU</span><span class="op">$</span><span class="va">pop18</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 18311106</code></pre>
<p>Then the median:</p>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">EU</span><span class="op">$</span><span class="va">pop18</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 9300319</code></pre>
<p>You can get information on the quartiles (remember that the median is the second quartile), the mean, as well as the minimum and maximum through one, simple command:</p>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">EU</span><span class="op">$</span><span class="va">pop18</span><span class="op">)</span></span></code></pre></div>
<pre><code>    Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
  475701  3781345  9300319 18311106 17766718 82850000 </code></pre>
<p>Let’s now move to measures of variability. First up is the range; you can either calculate this with two commands by finding out the minimum and maximum separately, or just ask R to give you both values straight away:</p>
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">EU</span><span class="op">$</span><span class="va">pop18</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 475701</code></pre>
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">EU</span><span class="op">$</span><span class="va">pop18</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 82850000</code></pre>
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/range.html">range</a></span><span class="op">(</span><span class="va">EU</span><span class="op">$</span><span class="va">pop18</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1]   475701 82850000</code></pre>
<p>The stadard deviation is rather long-winded to calculate by hand, but the R command is short and sweet:</p>
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">EU</span><span class="op">$</span><span class="va">pop18</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 23787945</code></pre>
<p>As you know, the variance is the squared standard deviation, but you can calculate it with its own command in R, too:</p>
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/cor.html">var</a></span><span class="op">(</span><span class="va">EU</span><span class="op">$</span><span class="va">pop18</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 5.658663e+14</code></pre>
<div class="video">
<p><strong>Descriptive Statistics</strong></p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/krE-9pVemTY?si=c6WUBnsap6Md8Zjd" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen>
</iframe>
</div>
<p>Now that you have all the relevant tools at hand, complete the following tasks:</p>
<ol style="list-style-type: decimal">
<li>Generate descriptive statistics for 3 of our variables.</li>
<li>Recode the variable ‘GDP_2015’ into a ordered factor called ‘gdp_level’ with three levels called “low”, “medium”, and “high” with cut-off points of your own choosing.</li>
<li>Produce a tabulation for ‘gdp_level’.</li>
</ol>
<hr>
</div>
<div id="graphs" class="section level2 unnumbered">
<h2>Graphs<a class="anchor" aria-label="anchor" href="#graphs"><i class="fas fa-link"></i></a>
</h2>
<p>R is probably <em>the</em> most powerful statistics programme for creating graphs. As this is an introductory level module, and we only have so much time available in the seminars, I will only be able to introduce you to the most commonly used ones; in the first instance histograms and boxplots. I will then introduce you to the package <code>ggplot2</code> which is simply the best invention since sliced bread, as it gives you pretty much endless optionality in customising graphs to show exactly what you want.</p>
<p>Whenever you produce a graph and you use it in an essay, your dissertation, or article, it is crucial that the graph is able to communicate its message <em>independently</em> from the text. So, a reader should be able to understand the graph and be able to appreciate fully its message without having to read the text. In a similar fashion, the text should always be written in such a way that a reader is able to understand it <em>without having to look at the graph</em>. This is a principle which equally applies to tables (more on this on PO12Q). If you do not follow this principle in the assessments on my modules, you will be marked down.</p>
<p>Chapter 4 in “The Visual Display of Quantitative Information” by <span class="citation">Tufte (2001)</span> is on the reading list as an essential item, but there are some more principles he sets out at the start of the book (p. 13) which are worthwhile repeating here:</p>
<blockquote>
<p>Excellence in statistical graphics consists of complex ideas communicated with clarity, precision, and efficiency. Graphical displays should</p>
</blockquote>
<blockquote>
<ul>
<li>show the data</li>
<li>induce the viewer to think about the substance rather than about methodology, graphic design, the technology of graphic production, or something else</li>
<li>avoid distorting what the data have to say</li>
<li>present many numbers in a small space</li>
<li>make large data sets coherent</li>
<li>encourage the eye to compare different pieces of data</li>
<li>reveal the data at several levels of detail, from a broad overview to the fine structure</li>
<li>serve a reasonably clear purpose: description, exploration, tabulation, or decoration</li>
<li>be closely integrated with the statistical and verbal descriptions of a data set.</li>
</ul>
</blockquote>
<blockquote>
<p>Graphics reveal data. Indeed graphics can be more precise and revealing than conventional statistical computations.</p>
</blockquote>
<hr>
</div>
<div id="basic-graphs" class="section level2 unnumbered">
<h2>Basic Graphs<a class="anchor" aria-label="anchor" href="#basic-graphs"><i class="fas fa-link"></i></a>
</h2>
<p>Let’s start with a histogram of the variable <code>pop18</code>. The range of the <code>pop18</code> variable is about 82 million - this is rather unwieldy to imagine and also to put onto axes of graphs, as they would mostly consist of zeros. So let’s express the population of each countries in million instead:</p>
<div class="sourceCode" id="cb85"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">EU</span><span class="op">$</span><span class="va">popmio</span> <span class="op">&lt;-</span> <span class="va">EU</span><span class="op">$</span><span class="va">pop18</span><span class="op">/</span><span class="fl">1000000</span></span></code></pre></div>
<p>We can now produce a histogram. Before doing this, it is sensible to think about the number of bars we want in the histogram. The smallest country has just shy of 500,000 inhabitants, whereas the largest has over 82 million. So, I would like the x-axis to run from zero to 100 (million) and divide this into 5 bars. Accordingly, we are introducing 4 breaks on the x-axis with the following command:</p>
<div class="sourceCode" id="cb86"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">EU</span><span class="op">$</span><span class="va">popmio</span>, breaks<span class="op">=</span><span class="fl">4</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="main_files/figure-html/unnamed-chunk-67-1.png" width="50%" style="display: block; margin: auto;"></div>
<p>This is certainly a histogram, but it does not conform to the principle of graphs that they should be able to communicate their message independently, yet. Take the label of the x-axis, for example, what does <code>EU$popmio</code> mean? You and I know, but somebody who doesn’t know R language wouldn’t. We can tell R to adjust the axis label, as well as the main title of the histogram as follows:</p>
<div class="sourceCode" id="cb87"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">EU</span><span class="op">$</span><span class="va">popmio</span>, breaks<span class="op">=</span><span class="fl">4</span>,</span>
<span>     xlab<span class="op">=</span><span class="st">"Population in million"</span>,</span>
<span>     main<span class="op">=</span><span class="st">"Histogram of EU Population (2018)"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="main_files/figure-html/unnamed-chunk-68-1.png" width="50%" style="display: block; margin: auto;"></div>
<div class="video">
<p><strong>Histograms</strong></p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/FQ9Suah3gZc?si=s0Ml-jV_Lyg2Fmah" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen>
</iframe>
</div>
<p>This is fine now. Ugly, but fine. I will show you how to do a boxplot next, and then I will take you through the process of making all this look a bit more jazzy. The command for the boxplot is very intuitive. The default in R is to arrange the boxplot vertically. I prefer them horizontally, and you can set this in an equally intuitive option.</p>
<div class="sourceCode" id="cb88"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/boxplot.html">boxplot</a></span><span class="op">(</span><span class="va">EU</span><span class="op">$</span><span class="va">popmio</span>, horizontal <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="main_files/figure-html/unnamed-chunk-69-1.png" width="50%" style="display: block; margin: auto;"></div>
<p>You will recognise the descriptives we calculated earlier with the <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> function:</p>
<div class="sourceCode" id="cb89"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">EU</span><span class="op">$</span><span class="va">popmio</span><span class="op">)</span></span></code></pre></div>
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
 0.4757  3.7813  9.3003 18.3111 17.7667 82.8500 </code></pre>
<div class="puzzle">
<p>Explain the outliers on the right mathematically.</p>
</div>
<hr>
</div>
<div id="advanced-graphs" class="section level2 unnumbered">
<h2>Advanced Graphs<a class="anchor" aria-label="anchor" href="#advanced-graphs"><i class="fas fa-link"></i></a>
</h2>
<p>The graphs we have produced so far are functional, but let’s be honest, they wouldn’t win any beauty contests. There is, as mentioned earlier, an amazing package called <code>ggplot2</code> which changes this dramatically. You have already installed it as a part of the tidyverse. Otherwise, the function would be:</p>
<div class="sourceCode" id="cb91"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"ggplot2"</span><span class="op">)</span></span></code></pre></div>
<p>We can just load it:</p>
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
<p>The “gg” in <code>ggplot2</code> stands for “grammar of graphs”. You will be familiar with the term “grammar”” from learning a language already. In this context, we use grammar to build sentences by choosing and arranging a variety different components, such as subjects, verbs and objects. If you know how to do this properly, you can express exactly what you want to say. The grammar of graphs adopts this logic and specifies a number of different components which allow you to create a graph which is able to communicate exactly what you wish to show.</p>
<p><code>ggplot2</code> has eight basic grammatical arguments:</p>
<p> </p>
<div class="top-bottom-rule-only">
<div class="inline-table"><table class="table" style="color: black; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:ggplot2">Table 2: </span>GGPLOT Components
</caption>
<tbody>
<tr>
<td style="text-align:left;min-width: 1.8in; ">
Data Frame
</td>
<td style="text-align:left;">
The data you wish to visualize.
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 1.8in; ">
Aesthetic Mappings
</td>
<td style="text-align:left;">
Here you specify how the data are assigned to colour, size, etc. For now, this is the variable for which we want to create a graphical distribution.
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 1.8in; ">
Geom
</td>
<td style="text-align:left;">
Short for “geometry”. Use a geom function to represent data points through geometric objects, such as points, lines, etc. Each function returns a layer.
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 1.8in; ">
Stat
</td>
<td style="text-align:left;">
You can include statistical summaries through this, such as smoothing, or regression lines.
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 1.8in; ">
Position
</td>
<td style="text-align:left;">
Position adjustments determine how to arrange geoms that would otherwise occupy the same space.
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 1.8in; ">
Facets
</td>
<td style="text-align:left;">
Facets divide a plot into sub-plots based on the values of one or more discrete variables.
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 1.8in; ">
Scale
</td>
<td style="text-align:left;">
Maps data values to the visual values of an aesthetic. For example female=pink, male=blue.
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 1.8in; ">
Coordinates
</td>
<td style="text-align:left;">
How do the numbers get translated onto the plot? We are not going to look at this on this module.
</td>
</tr>
</tbody>
</table></div>
</div>
<p> </p>
<p>I like to think of using these arguments like dressing myself in the morning. The minimum that common decency requires me to wear if I wish to leave the house is some underwear, some trousers, and a top. Depending on how I feel and what the weather is like, I can add more layers, like socks, a jumper, or a scarf. It is exactly the same with <code>ggplot2</code>. As a minimum to produce a plot you need a data frame, the aesthetic mapping and a geom. Once you have produced this minimalistic graph, you can modify it, by adding more components / arguments. As you can imagine the possibilities are almost endless, and we only have time to deal with the minimum here. This is not a problem, however, as most of the other grammatical arguments (Stats, Position, Facets and Scales) generally have sensible defaults.</p>
<p>So how does this work in practice? Let us reproduce the histogram of the <code>age</code> variable. We start by calling <code>ggplot2</code> and advise the function which data frame we wish to use (<code>EU</code>). In a second step, we add a geometry – in our case <code>geom_histogram</code>. Within the geometry, we need to specify for which variable we wish to create a distribution, or in the language of <code>ggplot2</code> which variable we wish to map to the geom as our Aesthetic. To produce 5 bars again, we specify a bandwidth of 20 million (this refers to <code>popmio</code>).</p>
<div class="sourceCode" id="cb93"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">EU</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>mapping<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">popmio</span><span class="op">)</span>, binwidth <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="main_files/figure-html/unnamed-chunk-73-1.png" width="50%" style="display: block; margin: auto;"></div>
<p>Annoyingly, <code>ggplot</code> places the axis ticks in the middle of each bar which is WRONG for histograms. They need to align with the boundaries of the bars. We do this by telling R the boundary of the plot:</p>
<div class="sourceCode" id="cb94"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">EU</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>mapping<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">popmio</span><span class="op">)</span>, binwidth <span class="op">=</span> <span class="fl">20</span>, </span>
<span>                 boundary <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="main_files/figure-html/unnamed-chunk-74-1.png" width="50%" style="display: block; margin: auto;"></div>
<p>This has shifted the ticks to the left, but now R has decided to label the x-axis in steps of 25, whereas our bars have a bandwidth of 20. Once again, we have the variable name on the x-axis, instead of a label which anybody could understand. I also prefer “Frequency” on the y-axis, instead of “Count”. To address both of these concerns, we simply add a layer for each. First up are the axis ticks. Our variable is continuous, so we choose the <code>scale_x_continuous</code> option, and tell R to break the axis up into a sequence which starts with zero, ends at 100 and has steps of 20 in between. In the <code>labs</code> argument we adjust the labelling as intended:</p>
<div class="sourceCode" id="cb95"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">EU</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>mapping<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">popmio</span><span class="op">)</span>, binwidth <span class="op">=</span> <span class="fl">20</span>, </span>
<span>                 boundary <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x<span class="op">=</span><span class="st">"Population (in million)"</span>, y<span class="op">=</span><span class="st">"Frequency"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="baser">
<details><summary>
Base R Solution
</summary><div class="sourceCode" id="cb96"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">EU</span><span class="op">$</span><span class="va">popmio</span>, breaks <span class="op">=</span> <span class="fl">4</span>,</span>
<span>     xlab <span class="op">=</span> <span class="st">"Population (in million)"</span>, ylab <span class="op">=</span> <span class="st">"Frequency"</span><span class="op">)</span></span></code></pre></div>
</details>
</div>
<div class="inline-figure"><img src="main_files/figure-html/unnamed-chunk-77-1.png" width="50%" style="display: block; margin: auto;"></div>
<p>I have also removed the background in line with the principles set out by <span class="citation">Tufte (2001, p. 96)</span> by adding <code><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic()</a></code>. This is it. A graph which can communicate its message independently, and which looks aesthetically pleasing.</p>
<p>In the present case we have the population, so displaying the frequency on the y-axis is sort of sensible, but usually we would be dealing with a sample. Here the count is not very telling and we would be using percentages, instead. Let’s do it!</p>
<hr>
</div>
<div id="even-more-advanced-graphs" class="section level2 unnumbered">
<h2>Even More Advanced Graphs<a class="anchor" aria-label="anchor" href="#even-more-advanced-graphs"><i class="fas fa-link"></i></a>
</h2>
<p>Unfortunately, there is no easy, default way to do this in R, but necessitates a calculation within the <code>ggplot</code> command. Once more we call <code>ggplot</code> and use the <code>EU</code> data set, and select the geom <code>geom_histogram</code>. Again we specify the binwidth as 20 with a boundary of zero, and put <code>popmio</code> on the x-axis. Now comes the point where we need to do something new, because <code>y</code> is not equivalent to the frequency any more, but should be percentage. To achieve this we advise R to put the density there (which is the relative frequency from the the lecture in week 5), and multiply this density by 100 to get percentage. Nothing has changed on the scaling of the x-axis from the previous plot, so we can copy and paste the <code>scale_x_continuous</code> section, as well as the labelling of the x-axis. In this last step, we now also need to adjust the label of the y-axis, because this has now percentage on it, and not frequency. The result is this:</p>
<div class="sourceCode" id="cb97"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">EU</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">20</span>, boundary <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                 <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span> <span class="va">popmio</span>, </span>
<span>                     y <span class="op">=</span> <span class="op">(</span><span class="va">..count..</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">..count..</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x<span class="op">=</span><span class="st">"Population (in million)"</span>, y<span class="op">=</span><span class="st">"percent"</span><span class="op">)</span>  <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="baser">
<details><summary>
Base R Solution
</summary><div class="sourceCode" id="cb98"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create histogram data without plotting</span></span>
<span><span class="va">h</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">EU</span><span class="op">$</span><span class="va">popmio</span>, </span>
<span>         breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span>, by <span class="op">=</span> <span class="fl">20</span><span class="op">)</span>, </span>
<span>         plot <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Normalize counts to percentages</span></span>
<span><span class="va">h</span><span class="op">$</span><span class="va">counts</span> <span class="op">&lt;-</span> <span class="va">h</span><span class="op">$</span><span class="va">counts</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">h</span><span class="op">$</span><span class="va">counts</span><span class="op">)</span> <span class="op">*</span> <span class="fl">100</span></span>
<span></span>
<span><span class="co"># Plot histogram</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">h</span>, </span>
<span>    freq <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>    xlab <span class="op">=</span> <span class="st">"Population (in million)"</span>, </span>
<span>    ylab <span class="op">=</span> <span class="st">"percent"</span>, </span>
<span>    main <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span></code></pre></div>
</details>
</div>
<div class="inline-figure"><img src="main_files/figure-html/unnamed-chunk-80-1.png" width="50%" style="display: block; margin: auto;"></div>
<div class="video">
<p><strong>Jazzy Graphs with GGPLOT</strong></p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Z4KAuOO_iew?si=oMrS0gYs1JnV5dPS" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen>
</iframe>
</div>
<hr>
</div>
<div id="organising-code-in-the-rscript" class="section level2 unnumbered">
<h2>Organising Code in the RScript<a class="anchor" aria-label="anchor" href="#organising-code-in-the-rscript"><i class="fas fa-link"></i></a>
</h2>
<p>Now is probably a good time to make you aware of how I have been organising code which runs over several lines. I could also have written the code of the last graph as</p>
<div class="sourceCode" id="cb99"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">EU</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">20</span>, boundary <span class="op">=</span> <span class="fl">0</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span> <span class="va">popmio</span>, y <span class="op">=</span> <span class="op">(</span><span class="va">..count..</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">..count..</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x<span class="op">=</span><span class="st">"Population"</span>, y<span class="op">=</span><span class="st">"percent"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>but this would have made it rather difficult to disentangle and to spot the structure of the graph straight away. So it is also a good idea to structure the code in a logical way which allows a reader to understand it as easily as possible. R is very smart in the way it indents the next line after pressing “enter” in an RScript automatically to the appropriate position. You see for example that in</p>
<div class="sourceCode" id="cb100"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">EU</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">20</span>, boundary <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                 <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span> <span class="va">popmio</span>, </span>
<span>                     y <span class="op">=</span> <span class="op">(</span><span class="va">..count..</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">..count..</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x<span class="op">=</span><span class="st">"Population (in million)"</span>, y<span class="op">=</span><span class="st">"percent"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>the <code>aes</code> which belongs to the <code>geom_histogram</code> layer is indented just so it starts flush with the first argument (<code>binwidth</code>) within this layer.</p>
<hr>
</div>
<div id="exercises-1" class="section level2 unnumbered">
<h2>Exercises<a class="anchor" aria-label="anchor" href="#exercises-1"><i class="fas fa-link"></i></a>
</h2>
<p>Using these commands, and moving beyond with the help of today’s reading, complete the following tasks:</p>
<ol style="list-style-type: decimal">
<li>Produce two base-R graphs of different types (e.g. histogram, bar chart, box-and-whisker plot) for separate variables in the EU data set.</li>
<li>Produce two <code>ggplot</code> graphs of different types (e.g. histogram, bar chart, box-and-whisker plot) for separate variables in the EU data set. Google to find more geoms.</li>
</ol>
<hr>
</div>
<div id="captions-for-tables-and-figures-in-word" class="section level2 unnumbered">
<h2>Captions for Tables and Figures in Word<a class="anchor" aria-label="anchor" href="#captions-for-tables-and-figures-in-word"><i class="fas fa-link"></i></a>
</h2>
<p>In essays, your dissertation and in articles, you will have to refer to tables and figures in the text. Now, you can do this by writing “the figure below”. But this is not very elegant. Also, what happens if you change the layout and all of a sudden “the figure below” becomes “the figure above”. This not only causes additional work because you have to edit the text and check all references to tables and figures once you are done (which is tedious beyond description), but there is also the risk that you miss one or a few in the process.</p>
<p>MS Word has a nifty function that allows you to insert captions for figures and tables, and then to insert cross-references into the text which get updated automatically before you send the document to the printer. Here is how to do it:</p>
<p>Say, you have a figure inserted into Word. You now click on it, then hover over the bottom right-hand square, and right-click with your mouse. From the resulting context menu you select “Insert Caption”.</p>
<div class="inline-figure"><img src="files/Week%202/insert_caption.png" width="60%" style="display: block; margin: auto;"></div>
<p>This results in the following window:</p>
<div class="inline-figure"><img src="files/Week%202/caption.png" width="40%" style="display: block; margin: auto;"></div>
<p>Select whether the item you want to describe is a figure, or a table. Then make sure you place the caption “below” the item (this is default). Then type your caption into the box at the top, such as “Figure 1: Skewness of Distributions”. Make sure the caption is <strong>telling</strong>. The reader needs to know from the caption what the figure or table is about. When you click OK, the document looks like this:</p>
<div class="inline-figure"><img src="files/Week%202/document.png" width="100%" style="display: block; margin: auto;"></div>
<p>Now you start writing the text and come to the point where you refer to the figure in question. Here, all you have to do is to select “Insert” and “Cross-Reference”” </p>
<div class="inline-figure"><img src="files/Week%202/hyperlink.png" width="30%" style="display: block; margin: auto;"></div>
<p>and select the following options in the pop-up window:</p>
<div class="inline-figure"><img src="files/Week%202/selection.png" width="30%" style="display: block; margin: auto;"></div>
<div style="page-break-after: always;"></div>
<p>Your text will then look like this:</p>
<div class="inline-figure"><img src="files/Week%202/text.png" width="90%" style="display: block; margin: auto;"></div>
<p>You don’t have to worry now about the sequence of numbering any more. If you insert another figure above this one, and insert a cross-reference in the text again, the sequence is automatically updated and our former “Figure 1” becomes “Figure 2”. Tables and figures have separate sequences of numbering.</p>
<p>One last word on the display of data in tables: <strong><em>DO NOT</em></strong> screenshot tables from R and insert them into your presentations. They look ugly and unprofessional. Make the effort and create a proper table, either in Word or Excel and populate it manually with the data from R. The insertion of captions and cross-references is the same as described above.</p>
</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="flashcards.html">Flashcards</a></div>
<div class="next"><a href="exercises-2.html">Exercises</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#data-manipulation-in-r">Data Manipulation in R</a></li>
<li><a class="nav-link" href="#self-reflection-questions-group-work">Self-Reflection Questions – Group Work</a></li>
<li><a class="nav-link" href="#opening-your-data-set">Opening your Data Set</a></li>
<li><a class="nav-link" href="#viewing-the-data">Viewing the Data</a></li>
<li>
<a class="nav-link" href="#variable-types-in-r">Variable Types in R</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#nominal-variables">Nominal Variables</a></li>
<li><a class="nav-link" href="#ordinal-variables">Ordinal Variables</a></li>
<li><a class="nav-link" href="#binary-dummy">Binary Dummy</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#sub-setting-data">Sub-Setting Data</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#by-variable">By Variable</a></li>
<li><a class="nav-link" href="#by-observation">By Observation</a></li>
<li><a class="nav-link" href="#keep-if-a-variable-has-a-certain-value">Keep if a variable has a certain value</a></li>
</ul>
</li>
<li><a class="nav-link" href="#ordering-data">Ordering Data</a></li>
<li><a class="nav-link" href="#grouping-data">Grouping Data</a></li>
<li><a class="nav-link" href="#combining-ordering-and-grouping-data">Combining Ordering and Grouping Data</a></li>
<li><a class="nav-link" href="#descriptive-statistics">Descriptive Statistics</a></li>
<li><a class="nav-link" href="#graphs">Graphs</a></li>
<li><a class="nav-link" href="#basic-graphs">Basic Graphs</a></li>
<li><a class="nav-link" href="#advanced-graphs">Advanced Graphs</a></li>
<li><a class="nav-link" href="#even-more-advanced-graphs">Even More Advanced Graphs</a></li>
<li><a class="nav-link" href="#organising-code-in-the-rscript">Organising Code in the RScript</a></li>
<li><a class="nav-link" href="#exercises-1">Exercises</a></li>
<li><a class="nav-link" href="#captions-for-tables-and-figures-in-word">Captions for Tables and Figures in Word</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong><p><img src="images/Crest_white.png" width="75" style="display:block; margin:auto; margin-bottom:3em;"> PO91Q: Fundamentals in Quantitative Research Methods – <br> Seminar Companion</p></strong>" was written by </p>
<p><strong>Dr Flo Reiche</strong> <br><strong>Department of Politics and International Studies</strong> <br><strong>University of Warwick</strong></p>. It was last built on 13 August, 2025.
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
