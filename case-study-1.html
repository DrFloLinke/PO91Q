<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Case Study15 |  PO91Q: Fundamentals in Quantitative Research Methods –   Seminar Companion</title>
<meta name="generator" content="bookdown 0.43 with bs4_book()">
<meta property="og:title" content="Case Study15 |  PO91Q: Fundamentals in Quantitative Research Methods –   Seminar Companion">
<meta property="og:type" content="book">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Case Study15 |  PO91Q: Fundamentals in Quantitative Research Methods –   Seminar Companion">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/Lexend-0.4.10/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.9.0/transition.js"></script><script src="libs/bs3compat-0.9.0/tabs.js"></script><script src="libs/bs3compat-0.9.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
          margin-bottom: 0em;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="style.css">
<meta name="description" content="Load Packages and Data Before starting, we need to load libraries and install packages if not already installed. In these exercises we will be using the following packages: haven ggplot2...">
<meta property="og:description" content="Load Packages and Data Before starting, we need to load libraries and install packages if not already installed. In these exercises we will be using the following packages: haven ggplot2...">
<meta name="twitter:description" content="Load Packages and Data Before starting, we need to load libraries and install packages if not already installed. In these exercises we will be using the following packages: haven ggplot2...">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title=""><p><img src="images/Crest_white.png" width="75" style="display:block; margin:auto; margin-bottom:3em;"> PO91Q: Fundamentals in Quantitative Research Methods – <br> Seminar Companion</p></a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Preface</a></li>
<li><a class="" href="companion-features.html">Companion Features</a></li>
<li><a class="" href="accessibility.html">Accessibility</a></li>
<li class="book-part">Week 1</li>
<li><a class="" href="introduction-to-r.html">Introduction to R</a></li>
<li><a class="" href="exercises.html">Exercises</a></li>
<li><a class="" href="homework-for-week-2.html">Homework for Week 2</a></li>
<li><a class="" href="glossary.html">Glossary</a></li>
<li><a class="" href="flashcards.html">Flashcards</a></li>
<li class="book-part">Week 2</li>
<li><a class="" href="data-manipulation-in-r.html">Data Manipulation in R</a></li>
<li><a class="" href="exercises-2.html">Exercises</a></li>
<li><a class="" href="homework-for-week-3.html">Homework for Week 3</a></li>
<li><a class="" href="glossary-1.html">Glossary</a></li>
<li><a class="" href="flashcards-1.html">Flashcards</a></li>
<li class="book-part">Week 3</li>
<li><a class="" href="foundations-of-statistical-inference.html">Foundations of Statistical Inference</a></li>
<li><a class="" href="exercises-3.html">Exercises7</a></li>
<li><a class="" href="homework-for-week-4.html">Homework for Week 4</a></li>
<li><a class="" href="glossary-2.html">Glossary</a></li>
<li><a class="" href="flashcards-2.html">Flashcards</a></li>
<li class="book-part">Week 4</li>
<li><a class="" href="confidence-intervals.html">Confidence Intervals</a></li>
<li><a class="" href="exercises-4.html">Exercises</a></li>
<li><a class="" href="homework-for-week-5.html">Homework for Week 5</a></li>
<li><a class="" href="glossary-3.html">Glossary</a></li>
<li><a class="" href="flashcards-3.html">Flashcards</a></li>
<li class="book-part">Week 5</li>
<li><a class="" href="causality-and-consolidation.html">Causality and Consolidation</a></li>
<li><a class="" href="homework-for-week-7.html">Homework for Week 7</a></li>
<li><a class="" href="glossary-4.html">Glossary</a></li>
<li><a class="" href="flashcards-4.html">Flashcards</a></li>
<li class="book-part">Week 6</li>
<li><a class="" href="reading-week.html">Reading Week</a></li>
<li class="book-part">Week 7</li>
<li><a class="" href="methods-methods-methods.html">Methods, Methods, Methods</a></li>
<li><a class="" href="bivariate-methods.html">Bivariate Methods</a></li>
<li><a class="" href="homework-for-week-8.html">Homework for Week 8</a></li>
<li><a class="" href="glossary-5.html">Glossary</a></li>
<li><a class="" href="flashcards-5.html">Flashcards</a></li>
<li class="book-part">Week 8</li>
<li><a class="" href="mmm-bivariate-regression.html">MMM – Bivariate Regression</a></li>
<li><a class="" href="mmm-model-fit.html">MMM – Model Fit</a></li>
<li><a class="" href="mmm-significance-testing.html">MMM – Significance Testing</a></li>
<li><a class="" href="bivariate-regression.html">Bivariate Regression</a></li>
<li><a class="active" href="case-study-1.html">Case Study15</a></li>
<li><a class="" href="homework-for-week-9.html">Homework for Week 9</a></li>
<li><a class="" href="glossary-6.html">Glossary</a></li>
<li><a class="" href="flashcards-6.html">Flashcards</a></li>
<li class="book-part">Week 9</li>
<li><a class="" href="methods-methods-methods-1.html">Methods, Methods, Methods</a></li>
<li><a class="" href="multiple-regression.html">Multiple Regression</a></li>
<li><a class="" href="homework-for-week-10.html">Homework for Week 10</a></li>
<li><a class="" href="glossary-7.html">Glossary</a></li>
<li><a class="" href="flashcards-7.html">Flashcards</a></li>
<li class="book-part">Week 10</li>
<li><a class="" href="methods-methods-methods-2.html">Methods, Methods, Methods</a></li>
<li><a class="" href="variable-transformations-and-exam-preparation.html">Variable Transformations and Exam Preparation</a></li>
<li><a class="" href="homework.html">Homework</a></li>
<li><a class="" href="glossary-8.html">Glossary</a></li>
<li><a class="" href="flashcards-8.html">Flashcards</a></li>
<li class="book-part">Downloads</li>
<li><a class="" href="downloads.html">Downloads</a></li>
<li class="book-part">Glossary</li>
<li><a class="" href="glossary-9.html">Glossary</a></li>
<li class="book-part">List of References</li>
<li><a class="" href="list-of-references.html">List of References</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><script src="sidebar-link.js"></script><div id="case-study-1" class="section level1 unnumbered">
<h1>Case Study<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;The structure of this study was originally designed by Oleksiy Bondarenko. I have slightly altered it in subsequent years.&lt;/p&gt;"><sup>15</sup></a><a class="anchor" aria-label="anchor" href="#case-study-1"><i class="fas fa-link"></i></a>
</h1>
<div id="load-packages-and-data" class="section level2 unnumbered">
<h2>Load Packages and Data<a class="anchor" aria-label="anchor" href="#load-packages-and-data"><i class="fas fa-link"></i></a>
</h2>
<p>Before starting, we need to load libraries and install packages if not already installed. In these exercises we will be using the following packages:</p>
<ol style="list-style-type: decimal">
<li><code>haven</code></li>
<li><code>ggplot2</code></li>
<li><code>modelsummary</code></li>
</ol>
<p>We will be using the <a href="files/Week%208/london.csv">london.csv</a> data set from the lecture, but with a different independent variable this time. These will be of particular interest:</p>
<p> </p>
<div class="custom-html-table">
<div class="inline-table"><table style="width:100%; color: black; margin-left: auto; margin-right: auto;" class="table">
<caption>
<span id="tab:casecode">Table 12: </span><code>london</code> Codebook
</caption>
<thead><tr>
<th style="text-align:left;">
variable
</th>
<th style="text-align:left;">
label
</th>
<th style="text-align:left;">
year
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;min-width: 1.25in; ">
const
</td>
<td style="text-align:left;">
Parliamentary constituency
</td>
<td style="text-align:left;">
n/a
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 1.25in; ">
gcse
</td>
<td style="text-align:left;">
An average score based on a pupil’s best eight grades in a group of GCSEs. The maximum a pupil can achieve is 90 points.
</td>
<td style="text-align:left;">
2019
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 1.25in; ">
eth_min
</td>
<td style="text-align:left;">
Percent of population composed by ethnic minorities
</td>
<td style="text-align:left;">
2011
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 1.25in; ">
idaci
</td>
<td style="text-align:left;">
The Income Deprivation Affecting Children Index rank - how it compares to other constituencies
</td>
<td style="text-align:left;">
2015/16
</td>
</tr>
<tr>
<td style="text-align:left;min-width: 1.25in; ">
income
</td>
<td style="text-align:left;">
Mean income by constituency
</td>
<td style="text-align:left;">
2017/18
</td>
</tr>
</tbody>
</table></div>
</div>
<p> </p>
<p>Data are taken from <span class="citation">House of Commons Library (n.d.)</span>, <span class="citation">GOV.UK (2013)</span>, and <span class="citation">London Data Store (2010)</span>. Set your working directory and load the data.</p>
</div>
<div id="inspect-your-data" class="section level2 unnumbered">
<h2>Inspect your data<a class="anchor" aria-label="anchor" href="#inspect-your-data"><i class="fas fa-link"></i></a>
</h2>
<p>Here you can use several basic functions. The dataset does not contain too many variables, so you can start by using <code><a href="https://rdrr.io/r/base/names.html">names()</a></code>, <code><a href="https://rdrr.io/r/utils/str.html">str()</a></code>, etc.</p>
</div>
<div id="preliminary-analysis" class="section level2 unnumbered">
<h2>Preliminary Analysis<a class="anchor" aria-label="anchor" href="#preliminary-analysis"><i class="fas fa-link"></i></a>
</h2>
<p>Let’s say we want to look at the relationship between income deprivation affecting children and GCSE scores. The two variables are, respectively, <code>idaci</code> and <code>gcse</code>.</p>
<p>Now, formulate the working (alternative) and the null hypothesis. Write them down.</p>
<p><strong>H<span class="math inline">\(\pmb{_0}\)</span>:</strong></p>
<p><strong>H<span class="math inline">\(\pmb{_1}\)</span>:</strong></p>
<p>Which is your dependent variable?</p>
<p>Run a frequency table on the <code>idaci</code> variable. Does this distribution make sense? Why/why not?</p>
<p>Do the same for the other variable. And guess what is the level of measurement.</p>
</div>
<div id="visualisation-1" class="section level2 unnumbered">
<h2>Visualisation<a class="anchor" aria-label="anchor" href="#visualisation-1"><i class="fas fa-link"></i></a>
</h2>
<p>Let’s start with the visualisation of the relationship between the two variables. What is the best way to visualise the relationship considering the level of measurement of our variables?</p>
<p><strong>Hint:</strong> Probably a scatterplot, right? So, use a scatterplot to visualise the relationship and add the regression line.</p>
<p>You can use <code>ggplot</code>, but also the base R <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code> function.</p>
<p>Improve the graph by:</p>
<ol style="list-style-type: decimal">
<li>Adding a regression line.</li>
<li>Adding up a relevant title, also possibly a subtitle.</li>
<li>Adding axes labels and making them readable.</li>
</ol>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:unnamed-chunk-115"></span>
<img src="images/Week%208/reg_case.png" alt="\label{fig:crime400}Impoact of Deprivation on GCSE Scores" width="65%"><p class="caption">
Figure 14: Impoact of Deprivation on GCSE Scores
</p>
</div>
</div>
<div id="visualisation-2.0" class="section level2 unnumbered">
<h2>Visualisation 2.0<a class="anchor" aria-label="anchor" href="#visualisation-2.0"><i class="fas fa-link"></i></a>
</h2>
<p>Now, draw a vertical and horizontal line corresponding to the mean of your variables using <code>geom_hline</code> and <code>geom_vline</code>. You can thus check if the regression line passes through the mean of X and Y. (see: <a href="https://www.rdocumentation.org/packages/ggplot2/versions/0.9.1/topics/geom_hline" class="uri">https://www.rdocumentation.org/packages/ggplot2/versions/0.9.1/topics/geom_hline</a>).</p>
<p>You can improve the scatterplot using a series of arguments (e.g., alpha) in the <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code> function in ggplot. Try to improve the Aesthetics of the scatterplot playing with alpha, for instance. (see: https:
//www.rdocumentation.org/packages/ggplot2/versions/3.4.0/topics/geom_point).</p>
</div>
<div id="saving-the-scatterplot" class="section level2 unnumbered">
<h2>Saving the Scatterplot<a class="anchor" aria-label="anchor" href="#saving-the-scatterplot"><i class="fas fa-link"></i></a>
</h2>
<p>You can save a graph as .png, .JPG (even .pdf) that you can then import in a word document. Although there are many way to use your R output, saving a graph might be sometimes useful.</p>
<p>Use the function <code><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">ggsave()</a></code> to save your scatterplot. Again, there are tons of examples online, google it.</p>
<p><strong>Hint:</strong> You first need to store the graph in an object.</p>
<p><strong>Hint 2:</strong> The file will end up in your working directory.</p>
</div>
<div id="regression-analysis-yes-finally" class="section level2 unnumbered">
<h2>Regression Analysis (yes, finally)<a class="anchor" aria-label="anchor" href="#regression-analysis-yes-finally"><i class="fas fa-link"></i></a>
</h2>
<p>Now we can finally run a linear regression with <code>gcse</code> as the outcome variable and <code>idaci</code> as the predictor using the <code><a href="https://rdrr.io/r/stats/lm.html">lm()</a></code> function. Store the results in an object called <code>model</code> and visualise the regression output using <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code>.</p>
<div class="sourceCode" id="cb112"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Store the results in an object called model #</span></span>
<span><span class="va">model</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">gcse</span> <span class="op">~</span> <span class="va">idaci</span>, <span class="va">london</span><span class="op">)</span></span>
<span><span class="co"># Visualise the regression output using summary() #</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code></pre></div>
<pre><code>
Call:
lm(formula = gcse ~ idaci, data = london)

Residuals:
    Min      1Q  Median      3Q     Max 
-6.4921 -2.5321 -0.1722  2.7077  7.7815 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) 45.852958   0.657251  69.765  &lt; 2e-16 ***
idaci        0.019765   0.002894   6.831  2.4e-09 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 3.317 on 71 degrees of freedom
Multiple R-squared:  0.3965,    Adjusted R-squared:  0.388 
F-statistic: 46.66 on 1 and 71 DF,  p-value: 2.398e-09</code></pre>
<p>You can also extract specific blocks of the output table. One way of doing it is to use the brackets [] after the <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> function. For example <code>summary()[8]</code>. Try to extract the block of Coefficients from the table, like this:</p>
<pre><code>$coefficients
              Estimate Std. Error   t value     Pr(&gt;|t|)
(Intercept) 45.8529580 0.65725150 69.764707 3.767825e-67
idaci        0.0197651 0.00289364  6.830532 2.397995e-09</code></pre>
</div>
<div id="interpretation" class="section level2 unnumbered">
<h2>Interpretation<a class="anchor" aria-label="anchor" href="#interpretation"><i class="fas fa-link"></i></a>
</h2>
<p>Interpret the results, starting with model evaluation.</p>
<ol style="list-style-type: decimal">
<li>Is the p-value of the F-statistics statistically significant? We will be discussing this in our following lectures.</li>
<li>How much variation in the outcome variable does the model explain? What does this tell us about the model?</li>
<li>What’s the value of the slope? What does it mean?</li>
<li>What’s the value of the intercept? How do we interpret it? Is it statistically significant? What does it mean in practice?</li>
<li>Interpret the results (in plain language) referring to the hypothesis you formulated above.</li>
</ol>
</div>
<div id="exporting-the-results" class="section level2 unnumbered">
<h2>Exporting the Results<a class="anchor" aria-label="anchor" href="#exporting-the-results"><i class="fas fa-link"></i></a>
</h2>
<p>As for the graphs, you can also export and save the results of the regression model in a Word table. To do that you can use the ‘modelsummary’ package.</p>
<p>Just like writing a shopping list, we start by creating a list of models for which we want <code>modelsummary</code> to produce a table. You can merely list the names of the objects in which the models are stored, or you can give them specific names which will appear as column titles in the table. This addition is by no means a must, but sometimes you might wish to give models a particular name, for example if you have used different methods of estimation, different components of a theory, etc. In the table we are creating here, I wish to distinguish between bivariate and multivariate models. By default, <code>modelsummary</code> just numbers models in ascending order.</p>
<div class="sourceCode" id="cb115"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">models</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"Bivariate"</span>    <span class="op">=</span> <span class="va">model</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>This simple step is already sufficient to produce – an admittedly somewhat crude – results table. All we have to do is to load the <code>modelsummary</code> package and to use the previously defined list of models as the argument of the <code><a href="https://modelsummary.com/man/modelsummary.html">modelsummary()</a></code> function:</p>
<div class="sourceCode" id="cb116"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://modelsummary.com">modelsummary</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://modelsummary.com/man/modelsummary.html">modelsummary</a></span><span class="op">(</span><span class="va">models</span><span class="op">)</span></span></code></pre></div>
<div class="bulb">
<p>Execute these code chunks as we go through this Section, so you can see the alterations we make to the table in real-time.</p>
</div>
<p>This table is a vast improvement on the raw R output you would receive when calling <code>summary(model1)</code>. But it is far from finished. One characteristic which is conspicuously absent is an assessment of statistical significance. In model summaries of this kind this information is usually provided in the form of asterisks or other symbols next to the respective coefficient. We can add these simply by adding the option <code>stars=TRUE</code> to the code.</p>
<div class="sourceCode" id="cb117"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://modelsummary.com/man/modelsummary.html">modelsummary</a></span><span class="op">(</span><span class="va">models</span>,</span>
<span>             stars <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Next up is the modification of the stub. The stub is the leftmost column in which you name the indicators for which coefficients will be presented.In the stub, “[a]bbreviate nothing. And never ever ever use computer variable names to stand for concepts. These are personal code words that convey no meaning to readers.” <span class="citation">(Stimson, n.d., p. 10)</span> Following this advice, let us add proper labels to the independent variables.</p>
<p>To let <code>modelsummary</code> know how to replace each variable name, we create a so-called coefficient map. This is really just a character vector which follows a “before-after” logic in each of its rows. For example <code>'age'='Age'</code> replaces the variable name <code>age</code> with the label <code>Age</code>. We need to do this for all the variables we used in our models. I am storing this in a vecor called <code>cm</code> which stands for coefficient map.</p>
<div class="sourceCode" id="cb118"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'idaci'</span>    <span class="op">=</span> <span class="st">'Income Deprivation Affecting Children Index'</span>,</span>
<span>        <span class="st">'(Intercept)'</span> <span class="op">=</span> <span class="st">'Intercept'</span><span class="op">)</span></span></code></pre></div>
<p>The next step is easy, as we only need to feed this coefficient map into the <code>modelsummary</code> code with the option <code>coef_map=cm</code>:</p>
<div class="sourceCode" id="cb119"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://modelsummary.com/man/modelsummary.html">modelsummary</a></span><span class="op">(</span><span class="va">models</span>,</span>
<span>             stars <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>             coef_map <span class="op">=</span> <span class="va">cm</span><span class="op">)</span></span></code></pre></div>
<p>This is a personal thing, but I also like to show the label of the dependent variable in results tables. They just feel incomplete to me without this information. There is no default to achieve this in <code>modelsummary</code> and so we need to use a little trick.</p>
<p>What I want to add in the first row, but only in the second columm, the text . This requires us to alter the style of the table slightly. <code>modelsummary</code> uses another package called <code>tinytable</code> to style the output. We load the package with <code><a href="https://vincentarelbundock.github.io/tinytable/">library(tinytable)</a></code> and instruct R to place the text where we want it.</p>
<div class="sourceCode" id="cb120"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://vincentarelbundock.github.io/tinytable/">tinytable</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://modelsummary.com/man/modelsummary.html">modelsummary</a></span><span class="op">(</span><span class="va">models</span>,</span>
<span>             stars <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>             coef_map <span class="op">=</span> <span class="va">cm</span><span class="op">)</span><span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://vincentarelbundock.github.io/tinytable/man/group_tt.html">group_tt</a></span><span class="op">(</span>j <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"Dependent Variable: GCSE Score"</span> <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Lastly, let us tackle the model fit statistics. By default, <code>modelsummary</code> prints a whole festival of these into the bottom section of the table, but I want to concentrate only on R<span class="math inline">\(^2\)</span>.</p>
<div class="sourceCode" id="cb121"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://modelsummary.com/man/modelsummary.html">modelsummary</a></span><span class="op">(</span><span class="va">models</span>,</span>
<span>             stars <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>             coef_map <span class="op">=</span> <span class="va">cm</span>,</span>
<span>             gof_omit <span class="op">=</span> <span class="st">'DF|Deviance|Log.Lik|F|AIC|BIC|RMSE'</span><span class="op">)</span><span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://vincentarelbundock.github.io/tinytable/man/group_tt.html">group_tt</a></span><span class="op">(</span>j <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"Dependent Variable: GCSE Score"</span> <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>This should produce this table:</p>
<!-- preamble start -->

    <script>

      function styleCell_uqojug9rinmy5ih4324a(i, j, css_id) {
          var table = document.getElementById("tinytable_uqojug9rinmy5ih4324a");
          var cell = table.rows[i]?.cells[j];  // Safe navigation to avoid errors
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_uqojug9rinmy5ih4324a');
        var newRow = table.insertRow(i);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_uqojug9rinmy5ih4324a(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_uqojug9rinmy5ih4324a");
        const targetRow = table.rows[i];
        const targetCell = targetRow.cells[j];
        for (let r = 0; r < rowspan; r++) {
          // Only start deleting cells to the right for the first row (r == 0)
          if (r === 0) {
            // Delete cells to the right of the target cell in the first row
            for (let c = colspan - 1; c > 0; c--) {
              if (table.rows[i + r].cells[j + c]) {
                table.rows[i + r].deleteCell(j + c);
              }
            }
          }
          // For rows below the first, delete starting from the target column
          if (r > 0) {
            for (let c = colspan - 1; c >= 0; c--) {
              if (table.rows[i + r] && table.rows[i + r].cells[j]) {
                table.rows[i + r].deleteCell(j);
              }
            }
          }
        }
        // Set rowspan and colspan of the target cell
        targetCell.rowSpan = rowspan;
        targetCell.colSpan = colspan;
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: 5, j: 1 },  ], css_id: 'tinytable_css_z27mpah6ubp1eivub3np',}, 
          { positions: [ { i: 2, j: 1 }, { i: 3, j: 1 }, { i: 4, j: 1 },  ], css_id: 'tinytable_css_6dlj2dor6mh1bu5wjb2z',}, 
          { positions: [ { i: 0, j: 1 },  ], css_id: 'tinytable_css_vu1eqzu0ara6yd5hjcqt',}, 
          { positions: [ { i: 1, j: 1 },  ], css_id: 'tinytable_css_l07z8vdwt98vgc16gt73',}, 
          { positions: [ { i: 5, j: 0 },  ], css_id: 'tinytable_css_xce8ql9b88e3p8usijy8',}, 
          { positions: [ { i: 2, j: 0 }, { i: 3, j: 0 }, { i: 4, j: 0 },  ], css_id: 'tinytable_css_vog99f8hskxj2fz5vrxc',}, 
          { positions: [ { i: 0, j: 0 },  ], css_id: 'tinytable_css_n2x1l40lbalm922ls3zh',}, 
          { positions: [ { i: 1, j: 0 },  ], css_id: 'tinytable_css_a7v3ljb69assh87by2dj',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_uqojug9rinmy5ih4324a(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script><style>
      /* tinytable css entries after */
      .table td.tinytable_css_z27mpah6ubp1eivub3np, .table th.tinytable_css_z27mpah6ubp1eivub3np { text-align: center; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_6dlj2dor6mh1bu5wjb2z, .table th.tinytable_css_6dlj2dor6mh1bu5wjb2z { text-align: center; }
      .table td.tinytable_css_vu1eqzu0ara6yd5hjcqt, .table th.tinytable_css_vu1eqzu0ara6yd5hjcqt { text-align: center; border-top: solid #d3d8dc 0.1em; text-align: center; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_l07z8vdwt98vgc16gt73, .table th.tinytable_css_l07z8vdwt98vgc16gt73 { text-align: center; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_xce8ql9b88e3p8usijy8, .table th.tinytable_css_xce8ql9b88e3p8usijy8 { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_vog99f8hskxj2fz5vrxc, .table th.tinytable_css_vog99f8hskxj2fz5vrxc { text-align: left; }
      .table td.tinytable_css_n2x1l40lbalm922ls3zh, .table th.tinytable_css_n2x1l40lbalm922ls3zh { text-align: left; border-top: solid #d3d8dc 0.1em; text-align: center; }
      .table td.tinytable_css_a7v3ljb69assh87by2dj, .table th.tinytable_css_a7v3ljb69assh87by2dj { text-align: left; border-bottom: solid #d3d8dc 0.05em; }
    </style>
<div class="container">
      <div class="inline-table"><table class="table table-borderless" id="tinytable_uqojug9rinmy5ih4324a" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
<thead>
<tr>
<th scope="col" align="center" colspan="1"> </th>
<th scope="col" align="center" colspan="1">Dependent Variable:<br>GCSE Score</th>
</tr>
<caption>
<span id="tab:reg91">Table 13: </span> Regression Models</caption>
              <tr>
<th scope="col"> </th>
                <th scope="col">Bivariate</th>
              </tr>
</thead>
<tfoot><tr><td colspan="2">+ p &lt; 0.1, * p &lt; 0.1, ** p &lt; 0.05, *** p &lt; 0.01</td></tr></tfoot>
<tbody>
<tr>
<td>Income Deprivation Affecting Children Index</td>
                  <td>0.020***</td>
                </tr>
<tr>
<td></td>
                  <td>(0.003)</td>
                </tr>
<tr>
<td>Intercept</td>
                  <td>45.853***</td>
                </tr>
<tr>
<td></td>
                  <td>(0.657)</td>
                </tr>
</tbody>
</table></div>
</div>
<!-- hack to avoid NA insertion in last line -->
<p>You can export your tables for use in MS Word, or Apple Pages. But you will not be able to export the full table, only up to the point at which you are specifying the options for <code>tinytable</code> with <code>|&gt;</code>. This is probably as good a reason as any to start working with Markdown or LaTeXBut if you are happy with this caveat, the following code will render the table in an MS Word document (<code>output="table.docx"</code>) that is placed in your working directory.</p>
<div class="sourceCode" id="cb122"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://modelsummary.com/man/modelsummary.html">modelsummary</a></span><span class="op">(</span><span class="va">models</span>,</span>
<span>             stars <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>             coef_map <span class="op">=</span> <span class="va">cm</span>,</span>
<span>             gof_omit <span class="op">=</span> <span class="st">'AIC|BIC|Log.Lik|F|RMSE'</span>,</span>
<span>             add_rows <span class="op">=</span> <span class="va">rows</span>,</span>
<span>             notes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">'This is a long and rather pointless </span></span>
<span><span class="st">                          note to demonstrate formatting.'</span><span class="op">)</span>,</span>
<span>             output <span class="op">=</span> <span class="st">"table.docx"</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="comparing-models" class="section level2 unnumbered">
<h2>Comparing Models<a class="anchor" aria-label="anchor" href="#comparing-models"><i class="fas fa-link"></i></a>
</h2>
<p>You can now run another regression model with . Compare your original model with the new one. How do you know which independent variable is doing a better job in explaining your dependent variable?</p>
</div>
<div id="causality-1" class="section level2 unnumbered">
<h2>Causality<a class="anchor" aria-label="anchor" href="#causality-1"><i class="fas fa-link"></i></a>
</h2>
<p>Consider the causality framework of Week 5. To what extent has this case study established causality? What is missing from the framework?</p>
</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="bivariate-regression.html">Bivariate Regression</a></div>
<div class="next"><a href="homework-for-week-9.html">Homework for Week 9</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#case-study-1">Case Study15</a></li>
<li><a class="nav-link" href="#load-packages-and-data">Load Packages and Data</a></li>
<li><a class="nav-link" href="#inspect-your-data">Inspect your data</a></li>
<li><a class="nav-link" href="#preliminary-analysis">Preliminary Analysis</a></li>
<li><a class="nav-link" href="#visualisation-1">Visualisation</a></li>
<li><a class="nav-link" href="#visualisation-2.0">Visualisation 2.0</a></li>
<li><a class="nav-link" href="#saving-the-scatterplot">Saving the Scatterplot</a></li>
<li><a class="nav-link" href="#regression-analysis-yes-finally">Regression Analysis (yes, finally)</a></li>
<li><a class="nav-link" href="#interpretation">Interpretation</a></li>
<li><a class="nav-link" href="#exporting-the-results">Exporting the Results</a></li>
<li><a class="nav-link" href="#comparing-models">Comparing Models</a></li>
<li><a class="nav-link" href="#causality-1">Causality</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong><p><img src="images/Crest_white.png" width="75" style="display:block; margin:auto; margin-bottom:3em;"> PO91Q: Fundamentals in Quantitative Research Methods – <br> Seminar Companion</p></strong>" was written by </p>
<p><strong>Dr Flo Reiche</strong> <br><strong>Department of Politics and International Studies</strong> <br><strong>University of Warwick</strong></p>. It was last built on 06 August, 2025.
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
