<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Week 2 – PO91Q: Fundamentals in Quantitative Research Methods</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./03-PO91Q.html" rel="next">
<link href="./01-PO91Q.html" rel="prev">
<link href="./images/Crest_white.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-e2851886d12d134ff83effd9cfa02285.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<meta name="theme-color" content="#1d1f2b" media="(prefers-color-scheme: dark)">
<meta name="theme-color" content="#1d1f2b" media="(prefers-color-scheme: light)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<script>
// This MUST come before the script src above
window.MathJax = {
  tex: {
    // (Quarto already sets these, but harmless to repeat)
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]'], ['$$', '$$']]
  },
  // Tell the CHTML output to use Fira
  chtml: { font: 'mathjax-fira' }
};
</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@4/tex-chtml-nofont.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="style.css">
</head>

<body class="nav-sidebar floating nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./images/Crest_white.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title"><span class="title-long">PO91Q: Fundamentals in Quantitative Research Methods</span> <span class="title-short">PO91Q</span></span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://drfloreiche.github.io/"> 
<span class="menu-text">Flo’s Home</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./02-PO91Q.html"><span class="chapter-title">Week 2</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-PO91Q.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Week 1</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-PO91Q.html" class="sidebar-item-text sidebar-link active"><span class="chapter-title">Week 2</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-PO91Q.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Week 3</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-PO91Q.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Week 4</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-PO91Q.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Week 5</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-PO91Q.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Week 6</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-PO91Q.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Week 7</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-PO91Q.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Week 8</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-PO91Q.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Week 9</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-PO91Q.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Week 10</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-Downloads.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Downloads</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-Glossary.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Full Glossary</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-bib.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">List of References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Week 2</h2>
   
  <ul>
  <li><a href="#self-reflection-questions-group-work" id="toc-self-reflection-questions-group-work" class="nav-link active" data-scroll-target="#self-reflection-questions-group-work">Self-Reflection Questions – Group Work</a></li>
  <li><a href="#data-manipulation-in-r" id="toc-data-manipulation-in-r" class="nav-link" data-scroll-target="#data-manipulation-in-r">Data Manipulation in R</a>
  <ul class="collapse">
  <li><a href="#opening-your-data-set" id="toc-opening-your-data-set" class="nav-link" data-scroll-target="#opening-your-data-set">Opening your Data Set</a></li>
  <li><a href="#viewing-the-data" id="toc-viewing-the-data" class="nav-link" data-scroll-target="#viewing-the-data">Viewing the Data</a></li>
  <li><a href="#variable-types-in-r" id="toc-variable-types-in-r" class="nav-link" data-scroll-target="#variable-types-in-r">Variable Types in R</a>
  <ul class="collapse">
  <li><a href="#nominal-variables" id="toc-nominal-variables" class="nav-link" data-scroll-target="#nominal-variables">Nominal Variables</a></li>
  <li><a href="#ordinal-variables" id="toc-ordinal-variables" class="nav-link" data-scroll-target="#ordinal-variables">Ordinal Variables</a></li>
  <li><a href="#binary-dummy" id="toc-binary-dummy" class="nav-link" data-scroll-target="#binary-dummy">Binary Dummy</a></li>
  </ul></li>
  <li><a href="#sub-setting-data" id="toc-sub-setting-data" class="nav-link" data-scroll-target="#sub-setting-data">Sub-Setting Data</a>
  <ul class="collapse">
  <li><a href="#by-variable" id="toc-by-variable" class="nav-link" data-scroll-target="#by-variable">By Variable</a></li>
  <li><a href="#by-observation" id="toc-by-observation" class="nav-link" data-scroll-target="#by-observation">By Observation</a></li>
  <li><a href="#keep-if-a-variable-has-a-certain-value" id="toc-keep-if-a-variable-has-a-certain-value" class="nav-link" data-scroll-target="#keep-if-a-variable-has-a-certain-value">Keep if a variable has a certain value</a></li>
  </ul></li>
  <li><a href="#ordering-data" id="toc-ordering-data" class="nav-link" data-scroll-target="#ordering-data">Ordering Data</a></li>
  <li><a href="#grouping-data" id="toc-grouping-data" class="nav-link" data-scroll-target="#grouping-data">Grouping Data</a></li>
  <li><a href="#combining-ordering-and-grouping-data" id="toc-combining-ordering-and-grouping-data" class="nav-link" data-scroll-target="#combining-ordering-and-grouping-data">Combining Ordering and Grouping Data</a></li>
  <li><a href="#descriptive-statistics" id="toc-descriptive-statistics" class="nav-link" data-scroll-target="#descriptive-statistics">Descriptive Statistics</a></li>
  <li><a href="#graphs" id="toc-graphs" class="nav-link" data-scroll-target="#graphs">Graphs</a></li>
  <li><a href="#basic-graphs" id="toc-basic-graphs" class="nav-link" data-scroll-target="#basic-graphs">Basic Graphs</a></li>
  <li><a href="#advanced-graphs" id="toc-advanced-graphs" class="nav-link" data-scroll-target="#advanced-graphs">Advanced Graphs</a></li>
  <li><a href="#even-more-advanced-graphs" id="toc-even-more-advanced-graphs" class="nav-link" data-scroll-target="#even-more-advanced-graphs">Even More Advanced Graphs</a></li>
  <li><a href="#organising-code-in-the-rscript" id="toc-organising-code-in-the-rscript" class="nav-link" data-scroll-target="#organising-code-in-the-rscript">Organising Code in the RScript</a></li>
  <li><a href="#exercises" id="toc-exercises" class="nav-link" data-scroll-target="#exercises">Exercises</a></li>
  <li><a href="#captions-for-tables-and-figures-in-word" id="toc-captions-for-tables-and-figures-in-word" class="nav-link" data-scroll-target="#captions-for-tables-and-figures-in-word">Captions for Tables and Figures in Word</a></li>
  </ul></li>
  <li><a href="#exercises-1" id="toc-exercises-1" class="nav-link" data-scroll-target="#exercises-1">Exercises</a>
  <ul class="collapse">
  <li><a href="#exploring-the-ess-core-exercises" id="toc-exploring-the-ess-core-exercises" class="nav-link" data-scroll-target="#exploring-the-ess-core-exercises">Exploring the ESS – Core Exercises</a></li>
  <li><a href="#exploring-the-ess-going-further" id="toc-exploring-the-ess-going-further" class="nav-link" data-scroll-target="#exploring-the-ess-going-further">Exploring the ESS – Going Further</a></li>
  </ul></li>
  <li><a href="#homework-for-week-3" id="toc-homework-for-week-3" class="nav-link" data-scroll-target="#homework-for-week-3">Homework for Week 3</a></li>
  <li><a href="#glossary" id="toc-glossary" class="nav-link" data-scroll-target="#glossary">Glossary</a></li>
  <li><a href="#flashcards" id="toc-flashcards" class="nav-link" data-scroll-target="#flashcards">Flashcards</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-title">Week 2</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="self-reflection-questions-group-work" class="level1 unnumbered">
<h1 class="unnumbered">Self-Reflection Questions – Group Work</h1>
<ol type="1">
<li>Why is it good practice to always use an RScript, rather than simply entering your commands into the console in R?</li>
<li>Give an example of an unordered factor variable and an ordered one.</li>
<li>Why are descriptive statistics useful?</li>
<li>Give an example of a situation where you would need to transform a character variable into a factor variable.</li>
<li>Why should you always create a new variable, instead of overwriting an existing one?<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></li>
</ol>
<p><br></p>
<p>I do not usually provide answers to these questions, as I am expecting you to either attend the seminar, or – in case you cannot make it – to contact me for advice or to share notes with another student. But I have nonetheless put this document together, so that you get an idea about my expectation horizon for answering these. Please bear this in mind in weeks to come.</p>
<p><a class="delayed-download btn btn-primary disabled" role="button" aria-disabled="true" data-path="files/Downloads/Week 2/PO91Q_Self-Reflection_Week-2.pdf" data-date="2025-10-15" data-label="<img src=&quot;images/file.png&quot; class=&quot;icon-img&quot; alt=&quot;icon&quot;> Answers to Self-Reflection Questions (available from October 15)"> <img src="images/file.png" class="icon-img" alt="icon"> Answers to Self-Reflection Questions (available from October 15) </a></p>
<p>&nbsp;</p>
<div style="display:none;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><embed src="files/Downloads/Week 2/PO91Q_Self-Reflection_Week-2.pdf" class="img-fluid"></p>
<figcaption>hidden</figcaption>
</figure>
</div>
</div>
<div class="stop">
<p>Please stop here and don’t go beyond this point until we have compared notes on your answers.</p>
</div>
</section>
<section id="data-manipulation-in-r" class="level1 unnumbered">
<h1 class="unnumbered">Data Manipulation in R</h1>
<section id="opening-your-data-set" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="opening-your-data-set">Opening your Data Set</h2>
<p>We are now ready to open a data set in R - where it is called a “data frame”. For this, we create a new object <code>EU</code>, and ask R to read “Sheet 1”” of the Excel file “EU.xlsx” which we placed in the working directory earlier</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>EU <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"EU.xlsx"</span>, <span class="at">sheet=</span><span class="st">"Sheet1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can now use our data in R!</p>
<div class="video">
<p><strong>Loading the Data Set</strong></p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/MCScLgUH3x4?si=_kbSBL-s7cSCMouY" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen="">
</iframe>
</div>
<div class="warning">
<p>Please do not use the “Import Dataset” button in the Environment, but do this properly, manually. We sometimes need to set options for importing data sets, and the “pointy, clicky” approach won’t be able to offer you what you need.</p>
</div>
</section>
<section id="viewing-the-data" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="viewing-the-data">Viewing the Data</h2>
<p>Unless you have been cheeky and opened the file in Excel to have a look, you have no idea yet, what the data look like. So it’s a good idea to view the data frame before doing anything with it. You can use the <code>View()</code> command to see the data frame:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(EU)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If you only want to see the first 6 observations of each variable, use the <code>head()</code> command:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(EU)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  country     pop18 access   area GDP_2015
  &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;
1 Belgium  11413058   1951  30280  4.66e11
2 Bulgaria  7050034   2007 108560  1.22e11
3 Czechia  10610055   2004  77230  3.19e11
4 Denmark   5781190   1973  42430  2.46e11
5 Germany  82850000   1951 348540  3.60e12
6 Estonia   1319133   2004  42390  3.51e10</code></pre>
</div>
</div>
<p>If you simply want to know the variable names in the data frame, type:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(EU)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "country"  "pop18"    "access"   "area"     "GDP_2015"</code></pre>
</div>
</div>
<p>The next one is a very important command, because it reveals not only the variable names and their first few observations, but also the nature of each variable (numerical, character, etc.). It is the <code>str()</code> command, where “str” stands for structure:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(EU)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [28 × 5] (S3: tbl_df/tbl/data.frame)
 $ country : chr [1:28] "Belgium" "Bulgaria" "Czechia" "Denmark" ...
 $ pop18   : num [1:28] 11413058 7050034 10610055 5781190 82850000 ...
 $ access  : num [1:28] 1951 2007 2004 1973 1951 ...
 $ area    : num [1:28] 30280 108560 77230 42430 348540 ...
 $ GDP_2015: num [1:28] 4.66e+11 1.22e+11 3.19e+11 2.46e+11 3.60e+12 ...</code></pre>
</div>
</div>
<p>You can see that R has recognised most variables as numerical, one is displayed as a character variable. This is appropriate for some variables, such as <code>pop18</code>, but not for the ordinal variable <code>access</code> which is ordinal. We need to recode it, and all other variables we are unhappy with.</p>
</section>
<section id="variable-types-in-r" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="variable-types-in-r">Variable Types in R</h2>
<p>R distinguishes between a number of different variable types and here is a broad overview of them. This will help you in deciding which descriptive statistics to calculate, or into which variable type you need to recode (next step) to achieve what you want. There are two general types:</p>
<ol type="1">
<li><code>numeric</code> – numbers</li>
<li><code>character</code> (also called string) – letters</li>
</ol>
<p>Within <code>numeric</code> we can distinguish between the following:</p>
<ul>
<li><code>factor</code> - nominal</li>
<li><code>ordered factor</code> - ordinal</li>
<li><code>integer</code> - numeric, but only “whole” numbers (discrete)</li>
<li><code>numeric</code> - any number (interval or ratio)</li>
</ul>
<p>Numerical variables are already in the data set, we have to attend to nominal and ordinal variables.</p>
<section id="nominal-variables" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="nominal-variables">Nominal Variables</h3>
<p>In terms of the variable types we encountered in the lecture this week, the country name is a nominal variable. So we need to tell R to turn this into a factor variable. We do this as follows:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>EU<span class="sc">$</span>country <span class="ot">=</span> <span class="fu">factor</span>(EU<span class="sc">$</span>country)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="ordinal-variables" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="ordinal-variables">Ordinal Variables</h3>
<p>As mentioned above, the variable <code>access</code> should be ordinal, and therefore has to be turned into an ordered factor. The command which follows is almost identical to producing a factor variable, only that we add the option <code>ordered = TRUE</code> at the end:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>EU<span class="sc">$</span>access_fac <span class="ot">=</span> <span class="fu">factor</span>(EU<span class="sc">$</span>access, <span class="at">ordered =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If you are familiar with European Studies, you will know that each accession wave has got a particular name. The 1973 enlargement, for example, is called the “First Enlargement”, the 1981 wave the Mediterranean Enlargement, and so forth. Let us create a new variable which uses these names instead of the years.</p>
<p>This process is a little more involved, and requires a new package to be installed and loaded: <code>dplyr</code>. This package is part of the so-called <code>tidyverse</code> which is a suite of packages designed to make working with R simpler and commands shorter. You can install all of them by calling <code>install.packages("tidyverse")</code>. We then load the <code>tidyverse</code> with:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The command which follows takes a little explaining. We start by stating the dataframe we wish to assign the result to, <code>EU</code>. Then we name the data frame that contains the data we wish to manipulate, here also <code>EU</code>. The symbol which follows, <code>\%&gt;\%</code>, reads as “and then”, and is called a “pipe”. So we take the data frame <code>EU</code> “and then” carry out a function called <code>mutate</code>. It creates a new variable called <code>wave</code> by recoding the variable <code>access_fac</code>. The command then specifies all categories of the “old” variable <code>access_fac</code> and what their respective values in the “new” variable <code>wave</code> are going to be. The categories in each are set in quotation marks, as they are factor / character categories.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>EU <span class="ot">&lt;-</span> EU <span class="sc">%&gt;%</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">wave =</span> <span class="fu">recode</span>(access_fac, <span class="st">'1951'</span><span class="ot">=</span><span class="st">"Founding"</span>, </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>                       <span class="st">'1973'</span><span class="ot">=</span> <span class="st">"First"</span>,</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>                       <span class="st">'1981'</span><span class="ot">=</span> <span class="st">"Mediterranean"</span>,</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>                       <span class="st">'1986'</span> <span class="ot">=</span> <span class="st">"Mediterranean"</span>,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>                       <span class="st">'1995'</span> <span class="ot">=</span> <span class="st">"Cold War"</span>,</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>                       <span class="st">'2004'</span> <span class="ot">=</span> <span class="st">"Eastern"</span>,</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>                       <span class="st">'2007'</span> <span class="ot">=</span> <span class="st">"Eastern"</span>,</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>                       <span class="st">'2013'</span> <span class="ot">=</span> <span class="st">"Balkans"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Please note that some colleagues in the department object to the use of the <code>tidyverse</code> as a “dialect” of R, and require you to use base R in their modules. However, on this module I am still using the <code>tidyverse</code>, as:</p>
<ul>
<li>my textbook, which is going to be the main textbook for this module from 2026, uses the <code>tidyverse</code>, and I think it is pedagogically wrong to divert from the main text in my seminars</li>
<li>I do not think it makes sense to exclude <em>one</em> of currently 22,505 packages<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></li>
<li><code>GGPLOT2</code> which is part of the <code>tidyverse</code> simplifies code for generating figures significantly and will do for all but the most specific requirements</li>
<li>a lot of support on <a href="https://stackexchange.com/">stackexchange</a> is geared toward the <code>tidyverse</code> as a lot of US-based data scientists work with this package, and so you will find it easier to solve problems</li>
</ul>
<p>But to keep everybody happy, I am providing the base R code whenever possible in a collapsible section like this one:</p>
<div class="baser">
<details>
<summary>
Base R Solution
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>EU<span class="sc">$</span>wave <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>EU<span class="sc">$</span>wave[EU<span class="sc">$</span>access_fac<span class="sc">==</span><span class="st">'1951'</span>] <span class="ot">&lt;-</span> <span class="st">"Founding"</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>EU<span class="sc">$</span>wave[EU<span class="sc">$</span>access_fac<span class="sc">==</span><span class="st">'1973'</span>] <span class="ot">&lt;-</span> <span class="st">"First"</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>EU<span class="sc">$</span>wave[EU<span class="sc">$</span>access_fac<span class="sc">==</span><span class="st">'1981'</span>] <span class="ot">&lt;-</span> <span class="st">"Mediterranean"</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>EU<span class="sc">$</span>wave[EU<span class="sc">$</span>access_fac<span class="sc">==</span><span class="st">'1986'</span>] <span class="ot">&lt;-</span> <span class="st">"Mediterranean"</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>EU<span class="sc">$</span>wave[EU<span class="sc">$</span>access_fac<span class="sc">==</span><span class="st">'1995'</span>] <span class="ot">&lt;-</span> <span class="st">"Cold War"</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>EU<span class="sc">$</span>wave[EU<span class="sc">$</span>access_fac<span class="sc">==</span><span class="st">'2004'</span>] <span class="ot">&lt;-</span> <span class="st">"Eastern"</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>EU<span class="sc">$</span>wave[EU<span class="sc">$</span>access_fac<span class="sc">==</span><span class="st">'2007'</span>] <span class="ot">&lt;-</span> <span class="st">"Eastern"</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>EU<span class="sc">$</span>wave[EU<span class="sc">$</span>access_fac<span class="sc">==</span><span class="st">'2013'</span>] <span class="ot">&lt;-</span> <span class="st">"Balkans"</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>EU<span class="sc">$</span>wave <span class="ot">&lt;-</span> <span class="fu">factor</span>(EU<span class="sc">$</span>wave, <span class="at">ordered =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
Here, we first create a new, empty variable called <code>wave</code> in the <code>EU</code> data set. We then create new values , for example <code>Founding</code> in the variable <code>EU$wave</code> for the condition (this is what the square brackets <code>[ ]</code> do) that the variable <code>access_fac</code> in the <code>EU</code> data set, equals a specific value. For <code>Founding</code> this is is <code>1951</code>. The last step is to turn the <code>wave</code> variable into an ordered factor.
</details>
</div>
<p>But back to the recoding exercise itself. Please note that the original variable <code>access_fac</code> was already an ordered factor. Therefore, R (or the <code>mutate</code> function to be precise) also returns <code>wave</code> as an ordered factor. Had <code>access_fac</code> been an unordered factor (aka nominal variable), <code>wave</code> would also have been an unorderd factor. You can specify in an option to the <code>mutate</code> function whether you want the factor to be ordered or not:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>EU <span class="ot">&lt;-</span> EU <span class="sc">%&gt;%</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">wave =</span> <span class="fu">recode</span>(access_fac, <span class="st">'1951'</span><span class="ot">=</span><span class="st">"Founding"</span>, </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>                       <span class="st">'1973'</span><span class="ot">=</span> <span class="st">"First"</span>,</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>                       <span class="st">'1981'</span><span class="ot">=</span> <span class="st">"Mediterranean"</span>,</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>                       <span class="st">'1986'</span> <span class="ot">=</span> <span class="st">"Mediterranean"</span>,</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>                       <span class="st">'1995'</span> <span class="ot">=</span> <span class="st">"Cold War"</span>,</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>                       <span class="st">'2004'</span> <span class="ot">=</span> <span class="st">"Eastern"</span>,</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>                       <span class="st">'2007'</span> <span class="ot">=</span> <span class="st">"Eastern"</span>,</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>                       <span class="st">'2013'</span> <span class="ot">=</span> <span class="st">"Balkans"</span>), <span class="at">ordered=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>access</code> only had a handful of numbers, and it turned out that each numerical value of this variable turned into a category in the new one. But often you have to recode variables of a more continuous nature into categories. Suppose, for example, we have the variable <code>age</code> which contains the age of respondents in a survey. If we wanted to recode this into categories such as 20-25, 26-35, etc., it would be tedious to assign a category to each individual value of <code>age</code>. This is where the <code>cut()</code> function comes in handy, as it literally cuts up a variable into chunks at the points we specify. Let’s apply this to the <code>access</code> variable.</p>
<p>Again, we use the <code>mutate</code> function, this time naming our new variable <code>wave1</code> (so as not to overwrite the <code>wave</code> variable we created with the <code>recode()</code> function). The <code>cut()</code> function splits a numeric variable into intervals using the <code>breaks</code> we specify in the function. Importantly, these intervals are left-open and right-closed. This means that each interval includes its upper boundary, but not the lower one. This sounds complicated, so let me give you an example. If, for example, we called</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cut</span>(x, <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>then the first interval would start at 10 and include all values greater than 10 and up to and including 20. The next interval would contain all values that are larger than 20 and up to and including 30.</p>
<p>When we apply this to our <code>access</code> variable, we therefore need to specify the breaks as follows:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cut</span>(access, <span class="at">breaks=</span><span class="fu">c</span>(<span class="dv">1950</span>, <span class="dv">1951</span>, <span class="dv">1973</span>, <span class="dv">1986</span>, <span class="dv">1995</span>, <span class="dv">2007</span>, <span class="dv">2013</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The first category (<code>Founding</code>) thus contains all years up to and including 1951, the next category (<code>First</code>), all years larger than 1951 and up to and including 1973, and so forth. Having created these categories (or <code>levels</code> in R terminology), we can then label them accordingly with <code>labels</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>EU <span class="ot">&lt;-</span> EU <span class="sc">%&gt;%</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">wave1=</span><span class="fu">cut</span>(access, </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">breaks=</span><span class="fu">c</span>(<span class="dv">1950</span>, <span class="dv">1951</span>, <span class="dv">1973</span>, <span class="dv">1986</span>, <span class="dv">1995</span>, <span class="dv">2007</span>, <span class="dv">2013</span>), </span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">labels=</span><span class="fu">c</span>(<span class="st">"Founding"</span>,<span class="st">"First"</span>,</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"Mediterranean"</span>, </span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"Cold War"</span>, </span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"Eastern"</span>, </span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"Balkans"</span>))) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(EU<span class="sc">$</span>wave)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Founding"      "First"         "Mediterranean" "Cold War"     
[5] "Eastern"       "Balkans"      </code></pre>
</div>
</div>
<div class="baser">
<details>
<summary>
Base R Solution
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>EU<span class="sc">$</span>wave <span class="ot">&lt;-</span> <span class="fu">cut</span>(EU<span class="sc">$</span>access, </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">breaks=</span><span class="fu">c</span>(<span class="dv">1950</span>, <span class="dv">1951</span>, <span class="dv">1973</span>, <span class="dv">1986</span>, <span class="dv">1995</span>, <span class="dv">2007</span>, <span class="dv">2013</span>), </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">labels=</span><span class="fu">c</span>(<span class="st">"Founding"</span>,<span class="st">"First"</span>,</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"Mediterranean"</span>, </span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"Cold War"</span>, </span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"Eastern"</span>, </span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"Balkans"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
</div>
<div class="video">
<p><strong>Recoding a Factor Variable</strong></p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/9_5IeNL3VP8?si=xVrgNuWG0L9kDZNo" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen="">
</iframe>
</div>
<div class="video">
<p><strong>Recoding Ordered Factor Variables</strong></p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/_WfmZprErV0?si=F6rRSJAkCvqBe_AT" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen="">
</iframe>
</div>
</section>
<section id="binary-dummy" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="binary-dummy">Binary Dummy</h3>
<p>Very often in political science we have yes/no scenarios, such as democracy yes or no, civil war, yes or no, etc. To analyse these scenarios, we can create so-called “dummy variables”. In the present example, let’s specify for each country whether it has been a founding member of the EU. It is a factor variable and so we do could do this exactly the same way as our initial recoding of the wave variable above:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>EU <span class="ot">&lt;-</span> EU <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">founding =</span> <span class="fu">recode</span>(access_fac, <span class="st">'1951'</span><span class="ot">=</span><span class="st">"Yes"</span>, </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>                       <span class="st">'1973'</span> <span class="ot">=</span> <span class="st">"No"</span>,</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>                       <span class="st">'1981'</span> <span class="ot">=</span> <span class="st">"No"</span>,</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>                       <span class="st">'1986'</span> <span class="ot">=</span> <span class="st">"No"</span>,</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>                       <span class="st">'1995'</span> <span class="ot">=</span> <span class="st">"No"</span>,</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>                       <span class="st">'2004'</span> <span class="ot">=</span> <span class="st">"No"</span>,</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>                       <span class="st">'2007'</span> <span class="ot">=</span> <span class="st">"No"</span>,</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>                       <span class="st">'2013'</span> <span class="ot">=</span> <span class="st">"No"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>There is a much shorter way to do this, however, and shorter is always preferred in coding so long as it leads to the same result. We can apply the <code>ifelse()</code> function which follows the rationale: <code>ifelse('condition', 'if condition met, then', 'otherwise')</code>. Here, if <code>access_fac=="1951"</code> we want to assign the value <code>"Yes"</code>, if not <code>"No"</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>EU <span class="ot">&lt;-</span> EU <span class="sc">%&gt;%</span> </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">founding =</span> <span class="fu">factor</span>(<span class="fu">ifelse</span>(access_fac<span class="sc">==</span><span class="st">"1951"</span>, <span class="st">"Yes"</span>, <span class="st">"No"</span>), </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>                              <span class="at">levels =</span><span class="fu">c</span>(<span class="st">"Yes"</span>, <span class="st">"No"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="baser">
<details>
<summary>
Base R Solution
</summary>
<p>Using <span style="color:black"><code>ifelse</code></span>, this is very similar, only the pipe disappears:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>EU<span class="sc">$</span>founding <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">ifelse</span>(EU<span class="sc">$</span>access_fac<span class="sc">==</span><span class="st">"1951"</span>, <span class="st">"Yes"</span>, <span class="st">"No"</span>), </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>                              <span class="at">levels =</span><span class="fu">c</span>(<span class="st">"Yes"</span>, <span class="st">"No"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
</div>
</section>
</section>
<section id="sub-setting-data" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="sub-setting-data">Sub-Setting Data</h2>
<p>When we start analysing data, we rarely need all data at the same time. We might not need some variables, at all, for example, or we only want to work with certain observations, such as those countries in the “founding” wave. In these cases, we can subset the data. I will show you some examples of subsetting now.</p>
<section id="by-variable" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="by-variable">By Variable</h3>
<p>If you are sure you won’t need a variable (remember, there is no back button), you can simply drop (i.e.&nbsp;delete) it. Let’s do this with the <code>area</code> variable:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>EU<span class="sc">$</span>area <span class="ot">&lt;-</span> <span class="cn">NULL</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If we are dropping multiple variables, we can either perform this operation each time, or use another command which allows us to operate with multiple variables at the same time. The <code>select()</code> command comes from the <code>tidyverse</code> package and specifies which variables we wish to keep:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>EU_pop <span class="ot">&lt;-</span> <span class="fu">select</span>(EU, country, pop18, access_fac, founding)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This creates a new data frame called <code>EU_pop</code> containing only the variables <code>country</code>, <code>pop18</code>, <code>access_fac</code>, and <code>founding</code>.</p>
<div class="baser">
<details>
<summary>
Base R Solution
</summary>
<p>The package documentation offers some <a href="https://dplyr.tidyverse.org/articles/base.html">basic instructions</a> how to convert the <span style="color:black"><code>tidyverse</code></span> (or <span style="color:black"><code>dyplyr</code></span>, to be precise) code into base R. But here is the solution for the previous code chunk:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>EU_pop <span class="ot">&lt;-</span> <span class="fu">subset</span>(EU, country, pop18, access_fac, founding)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
</div>
<p>We can, however, use the same command and tell R which variables to drop by adding a minus sign in from of the variables we want to delete. The following command produces exactly the same result as the one before:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>EU_pop1 <span class="ot">&lt;-</span> <span class="fu">select</span>(EU, <span class="sc">-</span>access, <span class="sc">-</span>GDP_2015)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="by-observation" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="by-observation">By Observation</h3>
<p>Instead of dropping and keeping variables, we can do the same thing to individual observations. Here, we use the <code>slice()</code> command (like a cake) and specify which slices we want to drop or keep. For example to drop the Benelux countries we would delete observations 1, 16 and 19:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>EU_nobenelux <span class="ot">&lt;-</span> <span class="fu">slice</span>(EU, <span class="sc">-</span><span class="dv">1</span>, <span class="sc">-</span><span class="dv">16</span>, <span class="sc">-</span><span class="dv">19</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="baser">
<details>
<summary>
Base R Solution
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>EU_pop <span class="ot">&lt;-</span> EU[<span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="sc">-</span><span class="dv">16</span>, <span class="sc">-</span><span class="dv">19</span>),]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
</div>
<p>Alternatively, if we were only interested in Benelux countries we would subset to only those observations:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>EU_benelux <span class="ot">&lt;-</span> <span class="fu">slice</span>(EU, <span class="dv">1</span>, <span class="dv">16</span>, <span class="dv">19</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="baser">
<details>
<summary>
Base R Solution
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>EU_pop <span class="ot">&lt;-</span> EU[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">16</span>, <span class="dv">19</span>),]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
</div>
</section>
<section id="keep-if-a-variable-has-a-certain-value" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="keep-if-a-variable-has-a-certain-value">Keep if a variable has a certain value</h3>
<p>One of the most useful commands is <code>filter()</code>, as it allows us to keep all observations for which the value of a variable is of a particular number. For example if we wanted to conduct an analysis with all countries which have a population in excess of 10 million we could subset by:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>EU_pop_large <span class="ot">&lt;-</span> <span class="fu">filter</span>(EU, pop18 <span class="sc">&gt;</span> <span class="dv">10000000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="baser">
<details>
<summary>
Base R Solution
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>EU_pop_large <span class="ot">&lt;-</span> <span class="fu">subset</span>(EU, pop18 <span class="sc">&gt;</span> <span class="dv">10000000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
</div>
<p>Here is a list of some operators you can use for this purpose:</p>
<p>&nbsp;</p>
<div class="custom-html-table">
<div style="width:45%; margin:0 auto;">
<div class="cell" data-tbl-colwidths="[25,75]">
<div id="tbl-operator" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-tbl-colwidths="[25,75]">
<figure class="quarto-float quarto-float-tbl figure">
<div aria-describedby="tbl-operator-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="cell table table-sm table-striped small">
<colgroup>
<col style="width: 25%">
<col style="width: 75%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Operator</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">&lt;</td>
<td style="text-align: left;">less than</td>
</tr>
<tr class="even">
<td style="text-align: left;">&lt;=</td>
<td style="text-align: left;">less than or equal to</td>
</tr>
<tr class="odd">
<td style="text-align: left;">&gt;</td>
<td style="text-align: left;">greater than</td>
</tr>
<tr class="even">
<td style="text-align: left;">&gt;=</td>
<td style="text-align: left;">greater than or equal to</td>
</tr>
<tr class="odd">
<td style="text-align: left;">==</td>
<td style="text-align: left;">exactly equal to</td>
</tr>
<tr class="even">
<td style="text-align: left;">!=</td>
<td style="text-align: left;">not equal to</td>
</tr>
<tr class="odd">
<td style="text-align: left;">!x</td>
<td style="text-align: left;">Not x</td>
</tr>
<tr class="even">
<td style="text-align: left;">x | y</td>
<td style="text-align: left;">x OR y</td>
</tr>
<tr class="odd">
<td style="text-align: left;">x &amp; y</td>
<td style="text-align: left;">x AND y</td>
</tr>
</tbody>
</table>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-tbl" id="tbl-operator-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1: Operators in R
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<p>&nbsp;</p>
<div class="video">
<p><strong>Subsetting Data</strong></p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/6lsmiXvWK-U?si=uizPzqBH5g5An6Ki" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen="">
</iframe>
</div>
</section>
</section>
<section id="ordering-data" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="ordering-data">Ordering Data</h2>
<p>The data set in its original state is purposely not ordered by any criterion, such as alphabetical order of countries, etc. But we can use R to do exactly that. Let us work with a subset containing only three variables:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>EU_subset <span class="ot">&lt;-</span> <span class="fu">select</span>(EU, country, pop18, access)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>It would be lovely if the command for ordering data would be called <code>order()</code>, but it is called <code>arrange()</code><a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>. Let’s order countries by ascending population in a new data frame called <code>eu_order</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>eu_order <span class="ot">&lt;-</span> <span class="fu">arrange</span>(EU_subset, pop18)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="baser">
<details>
<summary>
Base R Solution
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>eu_order <span class="ot">&lt;-</span> EU_subset[<span class="fu">order</span>(EU_subset<span class="sc">$</span>pop18),]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
</div>
<p>We can now display the first 10 rows with the following command:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>eu_order[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 3
   country      pop18 access
   &lt;fct&gt;        &lt;dbl&gt;  &lt;dbl&gt;
 1 Malta       475701   2004
 2 Luxembourg  602005   1951
 3 Cyprus      864236   2004
 4 Estonia    1319133   2004
 5 Latvia     1934379   2004
 6 Slovenia   2066880   2004
 7 Lithuania  2808901   2004
 8 Croatia    4105493   2013
 9 Ireland    4838259   1973
10 Slovakia   5443120   2004</code></pre>
</div>
</div>
<p>The content in the brackets refers to the rows (before the comma), and to the columns (after the comma). As we only want certain rows and displaying all variables, I have left the space after the comma blank.</p>
<p>We can do the same thing in descending order by calling:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>eu_order <span class="ot">&lt;-</span> <span class="fu">arrange</span>(EU_subset, <span class="fu">desc</span>(pop18))</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>eu_order[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 3
   country           pop18 access
   &lt;fct&gt;             &lt;dbl&gt;  &lt;dbl&gt;
 1 Germany        82850000   1951
 2 France         67221943   1951
 3 United Kingdom 66238007   1973
 4 Italy          60483973   1951
 5 Spain          46659302   1986
 6 Poland         37976687   2004
 7 Romania        19523621   2007
 8 Netherlands    17181084   1951
 9 Belgium        11413058   1951
10 Greece         10738868   1981</code></pre>
</div>
</div>
<div class="baser">
<details>
<summary>
Base R Solution
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>eu_order <span class="ot">&lt;-</span> EU_subset[<span class="fu">order</span>(<span class="fu">desc</span>(EU_subset<span class="sc">$</span>pop18)),]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
</div>
<p>A neat feature of R is that it allows us to order observations by more than one variable. So for example, we could order them by ascending accession wave first, and then by ascending population in 2018 as follows:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>eu_order <span class="ot">&lt;-</span> <span class="fu">arrange</span>(EU_subset, access, pop18)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>eu_order[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 3
   country           pop18 access
   &lt;fct&gt;             &lt;dbl&gt;  &lt;dbl&gt;
 1 Luxembourg       602005   1951
 2 Belgium        11413058   1951
 3 Netherlands    17181084   1951
 4 Italy          60483973   1951
 5 France         67221943   1951
 6 Germany        82850000   1951
 7 Ireland         4838259   1973
 8 Denmark         5781190   1973
 9 United Kingdom 66238007   1973
10 Greece         10738868   1981</code></pre>
</div>
</div>
<div class="baser">
<details>
<summary>
Base R Solution
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>eu_order <span class="ot">&lt;-</span> EU_subset[<span class="fu">order</span>(EU_subset<span class="sc">$</span>access,EU_subset<span class="sc">$</span>pop18),]</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="co"># or slightly shorter </span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>eu_order <span class="ot">&lt;-</span> EU_subset[<span class="fu">order</span>(<span class="fu">with</span>(EU_subset, access,pop18)),]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
</div>
</section>
<section id="grouping-data" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="grouping-data">Grouping Data</h2>
<p>Looking at the last example, a question that might spring up is in which accession wave the joining countries brought the largest population increase on average to the EU. We can calculate summary statistics for a particular group by, well, grouping them. The first step is to group data into rows with the same value:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>eu_access <span class="ot">&lt;-</span> <span class="fu">group_by</span>(EU_subset, access)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>By the way: whenever you have grouped anything, and finished analysing data in this grouped version it is essential that you ungroup the data afterwards, so that you don’t unintentionally keep using the groups:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ungroup</span>(EU_subset)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 28 × 3
   country     pop18 access
   &lt;fct&gt;       &lt;dbl&gt;  &lt;dbl&gt;
 1 Belgium  11413058   1951
 2 Bulgaria  7050034   2007
 3 Czechia  10610055   2004
 4 Denmark   5781190   1973
 5 Germany  82850000   1951
 6 Estonia   1319133   2004
 7 Ireland   4838259   1973
 8 Greece   10738868   1981
 9 Spain    46659302   1986
10 France   67221943   1951
# ℹ 18 more rows</code></pre>
</div>
</div>
<p>But let’s calculate the average population size per accession wave in an elegant command which combines multiple steps by using pipes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>eu_popaccess <span class="ot">&lt;-</span> EU_subset <span class="sc">%&gt;%</span> </span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(access) <span class="sc">%&gt;%</span> </span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg =</span> <span class="fu">mean</span>(pop18))</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>eu_popaccess</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 2
  access       avg
   &lt;dbl&gt;     &lt;dbl&gt;
1   1951 39958677.
2   1973 25619152 
3   1981 10738868 
4   1986 28475164.
5   1995  8151880.
6   2004  7327746.
7   2007 13286828.
8   2013  4105493 </code></pre>
</div>
</div>
<div class="baser">
<details>
<summary>
Base R Solution
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>eu_popaccess1 <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(pop18 <span class="sc">~</span> access, </span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>                           <span class="at">data =</span> EU_subset, </span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>                           <span class="at">FUN =</span> mean )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
</div>
<p>You now see a new variable called <code>avg</code> which contains the average population increase for each wave. In which wave did the joining countries have the largest population on average?</p>
</section>
<section id="combining-ordering-and-grouping-data" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="combining-ordering-and-grouping-data">Combining Ordering and Grouping Data</h2>
<p>The question was easy to answer here, as we only have a few accession waves. It starts to get unwieldy though, the more groups we have, but we can let R do the job by combining first grouping, and then ordering. So we take the grouped data frame <code>eu_popaccess</code> and order it by descending <code>avg</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>eu_popaccess_order <span class="ot">&lt;-</span> <span class="fu">arrange</span>(eu_popaccess, <span class="fu">desc</span>(avg))</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>eu_popaccess_order</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 2
  access       avg
   &lt;dbl&gt;     &lt;dbl&gt;
1   1951 39958677.
2   1986 28475164.
3   1973 25619152 
4   2007 13286828.
5   1981 10738868 
6   1995  8151880.
7   2004  7327746.
8   2013  4105493 </code></pre>
</div>
</div>
<div class="baser">
<details>
<summary>
Base R Solution
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>eu_popaccess_order <span class="ot">&lt;-</span> eu_popaccess[<span class="fu">order</span>(<span class="fu">desc</span>(eu_popaccess<span class="sc">$</span>avg)),]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
</div>
</section>
<section id="descriptive-statistics" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="descriptive-statistics">Descriptive Statistics</h2>
<p>We have covered quite a large number of descriptive statistics, so far. These are:</p>
<ul>
<li>Mean</li>
<li>Median<br>
</li>
<li>Mode</li>
<li>Standard Deviation</li>
<li>Variance</li>
<li>Quartiles and Percentiles</li>
<li>Range</li>
<li>Interquartile Range</li>
</ul>
<p>Use the app below (it might take a moment to load, as it is a web-based application) to evaluate how the mean, median, and mode influence the shape of a distribution. Reflect first on how a new value will alter the distribution before carrying out the change.</p>
<!-- Shiny app iframe -->
<iframe id="mmm-iframe" src="https://drfloreiche.github.io/shinylive/mmm/" title="Mean • Median • Mode" style="width:100%; border:0; display:block; min-height:520px;">
</iframe>

<!-- iFrame Resizer (parent side) -->
<script src="https://cdn.jsdelivr.net/npm/iframe-resizer/js/iframeResizer.min.js"></script>
<script>
  iFrameResize({
    // use false while debugging; lock it down after:
    // checkOrigin: false,
    checkOrigin: ['https://drfloreiche.github.io/shinylive/mmm/'],
    heightCalculationMethod: 'max',
    sizeHeight: true,
    minHeight: 520,
    log: false
  }, '#mmm-iframe');
</script>
<p>Descriptive statistics are a lot of effort to calculate by hand, especially for larger data sets, but R can do these with a few intuitive commands. First up is the mean.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(EU<span class="sc">$</span>pop18)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 18311106</code></pre>
</div>
</div>
<p>Then the median:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(EU<span class="sc">$</span>pop18)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9300319</code></pre>
</div>
</div>
<p>You can get information on the quartiles (remember that the median is the second quartile), the mean, as well as the minimum and maximum through one, simple command:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(EU<span class="sc">$</span>pop18)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
  475701  3781345  9300319 18311106 17766718 82850000 </code></pre>
</div>
</div>
<p>If you want a specific percentile, say the 10<span class="math inline">\(^\text{th}\)</span>, you can use the <code>quantile()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">quantile</span>(EU<span class="sc">$</span>pop18, <span class="at">p=</span><span class="fl">0.1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    10% 
1182664 </code></pre>
</div>
</div>
<p>And this brings us neatly to measures of variability. Next up is the range; you can either calculate this with two commands by finding out the minimum and maximum separately, or just ask R to give you both values straight away:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(EU<span class="sc">$</span>pop18)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 475701</code></pre>
</div>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(EU<span class="sc">$</span>pop18)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 82850000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(EU<span class="sc">$</span>pop18)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]   475701 82850000</code></pre>
</div>
</div>
<p>The stadard deviation is rather long-winded to calculate by hand, but the R command is short and sweet:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(EU<span class="sc">$</span>pop18)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 23787945</code></pre>
</div>
</div>
<p>If you want to see how the mean and the standard deviation change a distribution, use the sliders below. Reflect first on how a new value will alter the distribution before carrying out the change.</p>
<!-- Shiny app iframe -->
<iframe id="mmm-iframe" src="https://drfloreiche.github.io/shinylive/sd/" title="Mean • Median • Mode" style="width:100%; border:0; display:block; min-height:520px;">
</iframe>

<!-- iFrame Resizer (parent side) -->
<script src="https://cdn.jsdelivr.net/npm/iframe-resizer/js/iframeResizer.min.js"></script>
<script>
  iFrameResize({
    // use false while debugging; lock it down after:
    // checkOrigin: false,
    checkOrigin: ['https://drfloreiche.github.io/shinylive/sd/'],
    heightCalculationMethod: 'max',
    sizeHeight: true,
    minHeight: 520,
    log: false
  }, '#mmm-iframe');
</script>
<p>As you know, the variance is the squared standard deviation, but you can calculate it with its own command in R, too:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(EU<span class="sc">$</span>pop18)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5.658663e+14</code></pre>
</div>
</div>
<div class="video">
<p><strong>Descriptive Statistics</strong></p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/krE-9pVemTY?si=c6WUBnsap6Md8Zjd" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen="">
</iframe>
</div>
<p>Now that you have all the relevant tools at hand, complete the following tasks:</p>
<ol type="1">
<li>Generate descriptive statistics for 3 of our variables.</li>
<li>Recode the variable ‘GDP_2015’ into a ordered factor called ‘gdp_level’ with three levels called “low”, “medium”, and “high” with cut-off points of your own choosing.</li>
<li>Produce a tabulation for ‘gdp_level’.</li>
</ol>
</section>
<section id="graphs" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="graphs">Graphs</h2>
<p>R is probably <em>the</em> most powerful statistics programme for creating graphs. As this is an introductory level module, and we only have so much time available in the seminars, I will only be able to introduce you to the most commonly used ones; in the first instance histograms and boxplots. I will then introduce you to the package <code>ggplot2</code> which is simply the best invention since sliced bread, as it gives you pretty much endless optionality in customising graphs to show exactly what you want.</p>
<p>Whenever you produce a graph and you use it in an essay, your dissertation, or article, it is crucial that the graph is able to communicate its message <em>independently</em> from the text. So, a reader should be able to understand the graph and be able to appreciate fully its message without having to read the text. In a similar fashion, the text should always be written in such a way that a reader is able to understand it <em>without having to look at the graph</em>. This is a principle which equally applies to tables (more on this on PO12Q). If you do not follow this principle in the assessments on my modules, you will be marked down.</p>
<p>Chapter 4 in “The Visual Display of Quantitative Information” by <span class="citation" data-cites="tufte:2001">Tufte (2001)</span> is on the reading list as an essential item, but there are some more principles he sets out at the start of the book (p.&nbsp;13) which are worthwhile repeating here:</p>
<blockquote class="blockquote">
<p>Excellence in statistical graphics consists of complex ideas communicated with clarity, precision, and efficiency. Graphical displays should</p>
</blockquote>
<blockquote class="blockquote">
<ul>
<li>show the data</li>
<li>induce the viewer to think about the substance rather than about methodology, graphic design, the technology of graphic production, or something else</li>
<li>avoid distorting what the data have to say</li>
<li>present many numbers in a small space</li>
<li>make large data sets coherent</li>
<li>encourage the eye to compare different pieces of data</li>
<li>reveal the data at several levels of detail, from a broad overview to the fine structure</li>
<li>serve a reasonably clear purpose: description, exploration, tabulation, or decoration</li>
<li>be closely integrated with the statistical and verbal descriptions of a data set.</li>
</ul>
</blockquote>
<blockquote class="blockquote">
<p>Graphics reveal data. Indeed graphics can be more precise and revealing than conventional statistical computations.</p>
</blockquote>
</section>
<section id="basic-graphs" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="basic-graphs">Basic Graphs</h2>
<p>Let’s start with a histogram of the variable <code>pop18</code>. The range of the <code>pop18</code> variable is about 82 million - this is rather unwieldy to imagine and also to put onto axes of graphs, as they would mostly consist of zeros. So let’s express the population of each countries in million instead:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>EU<span class="sc">$</span>popmio <span class="ot">&lt;-</span> EU<span class="sc">$</span>pop18<span class="sc">/</span><span class="dv">1000000</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can now produce a histogram. Before doing this, it is sensible to think about the number of bars we want in the histogram. The smallest country has just shy of 500,000 inhabitants, whereas the largest has over 82 million. So, I would like the x-axis to run from zero to 100 (million) and divide this into 5 bars. Accordingly, we are introducing 4 breaks on the x-axis with the following command:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(EU<span class="sc">$</span>popmio, <span class="at">breaks =</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-eu-pop-basic-hist" class="quarto-float quarto-figure quarto-figure-center anchored" width="50%" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-eu-pop-basic-hist-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-PO91Q_files/figure-html/fig-eu-pop-basic-hist-1.png" id="fig-eu-pop-basic-hist" class="img-fluid quarto-figure quarto-figure-center anchored figure-img" style="width:50.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-eu-pop-basic-hist-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1
</figcaption>
</figure>
</div>
</div>
</div>
<p>This is certainly a histogram, but it does not conform to the principle of graphs that they should be able to communicate their message independently, yet. Take the label of the x-axis, for example, what does <code>EU$popmio</code> mean? You and I know, but somebody who doesn’t know R language wouldn’t. We can tell R to adjust the axis label, as well as the main title of the histogram as follows:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(EU<span class="sc">$</span>popmio, <span class="at">breaks =</span> <span class="dv">4</span>,</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Population in million"</span>,</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Histogram of EU Population (2018)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-eu-pop" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-eu-pop-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-PO91Q_files/figure-html/fig-eu-pop-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-eu-pop-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Histogram of EU Population (2018)
</figcaption>
</figure>
</div>
</div>
</div>
<div class="video">
<p><strong>Histograms</strong></p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/FQ9Suah3gZc?si=s0Ml-jV_Lyg2Fmah" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen="">
</iframe>
</div>
<p>This is fine now. Ugly, but fine. I will show you how to do a boxplot next, and then I will take you through the process of making all this look a bit more jazzy. The command for the boxplot is very intuitive. The default in R is to arrange the boxplot vertically. I prefer them horizontally, and you can set this in an equally intuitive option.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(EU<span class="sc">$</span>popmio, <span class="at">horizontal =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-eu-pop-box" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-eu-pop-box-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-PO91Q_files/figure-html/fig-eu-pop-box-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-eu-pop-box-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Boxplot of EU Population
</figcaption>
</figure>
</div>
</div>
</div>
<p>You will recognise the descriptives we calculated earlier with the <code>summary()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(EU<span class="sc">$</span>popmio)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
 0.4757  3.7813  9.3003 18.3111 17.7667 82.8500 </code></pre>
</div>
</div>
<div class="puzzle">
<p>Explain the outliers on the right mathematically.</p>
</div>
</section>
<section id="advanced-graphs" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="advanced-graphs">Advanced Graphs</h2>
<p>The graphs we have produced so far are functional, but let’s be honest, they wouldn’t win any beauty contests. There is, as mentioned earlier, an amazing package called <code>ggplot2</code> which changes this dramatically. You have already installed it as a part of the tidyverse. Otherwise, the function would be:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"ggplot2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can just load it:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The “gg” in <code>ggplot2</code> stands for “grammar of graphs”. You will be familiar with the term “grammar”” from learning a language already. In this context, we use grammar to build sentences by choosing and arranging a variety different components, such as subjects, verbs and objects. If you know how to do this properly, you can express exactly what you want to say. The grammar of graphs adopts this logic and specifies a number of different components which allow you to create a graph which is able to communicate exactly what you wish to show.</p>
<p><code>ggplot2</code> has eight basic grammatical arguments:</p>
<p>&nbsp;</p>
<div class="top-bottom-rule-only">
<div class="cell">
<div class="cell-output-display">
<table class="top-bottom-rule-only table table-sm table-striped small" data-quarto-postprocess="true">
<tbody>
<tr class="odd">
<td style="text-align: left;">Data Frame</td>
<td style="text-align: left;">The data you wish to visualize.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Aesthetic Mappings</td>
<td style="text-align: left;">Here you specify how the data are assigned to colour, size, etc. For now, this is the variable for which we want to create a graphical distribution.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Geom</td>
<td style="text-align: left;">Short for "geometry". Use a geom function to represent data points through geometric objects, such as points, lines, etc. Each function returns a layer.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Stat</td>
<td style="text-align: left;">You can include statistical summaries through this, such as smoothing, or regression lines.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Position</td>
<td style="text-align: left;">Position adjustments determine how to arrange geoms that would otherwise occupy the same space.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Facets</td>
<td style="text-align: left;">Facets divide a plot into sub-plots based on the values of one or more discrete variables.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Scale</td>
<td style="text-align: left;">Maps data values to the visual values of an aesthetic. For example female=pink, male=blue.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Coordinates</td>
<td style="text-align: left;">How do the numbers get translated onto the plot? We are not going to look at this on this module.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>&nbsp;</p>
<p>I like to think of using these arguments like dressing myself in the morning. The minimum that common decency requires me to wear if I wish to leave the house is some underwear, some trousers, and a top. Depending on how I feel and what the weather is like, I can add more layers, like socks, a jumper, or a scarf. It is exactly the same with <code>ggplot2</code>. As a minimum to produce a plot you need a data frame, the aesthetic mapping and a geom. Once you have produced this minimalistic graph, you can modify it, by adding more components / arguments. As you can imagine the possibilities are almost endless, and we only have time to deal with the minimum here. This is not a problem, however, as most of the other grammatical arguments (Stats, Position, Facets and Scales) generally have sensible defaults.</p>
<p>So how does this work in practice? Let us reproduce the histogram of the <code>age</code> variable. We start by calling <code>ggplot2</code> and advise the function which data frame we wish to use (<code>EU</code>). In a second step, we add a geometry – in our case <code>geom_histogram</code>. Within the geometry, we need to specify for which variable we wish to create a distribution, or in the language of <code>ggplot2</code> which variable we wish to map to the geom as our Aesthetic. To produce 5 bars again, we specify a bandwidth of 20 million (this refers to <code>popmio</code>).</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> EU) <span class="sc">+</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(popmio), <span class="at">binwidth =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-eu-pop-gg-hist" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-eu-pop-gg-hist-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-PO91Q_files/figure-html/fig-eu-pop-gg-hist-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-eu-pop-gg-hist-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: Histogram of EU Population (binwidth = 20)
</figcaption>
</figure>
</div>
</div>
</div>
<p>Annoyingly, <code>ggplot</code> places the axis ticks in the middle of each bar which is WRONG for histograms. They need to align with the boundaries of the bars. We do this by telling R the boundary of the plot:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> EU) <span class="sc">+</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(popmio), <span class="at">binwidth =</span> <span class="dv">20</span>, </span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">boundary =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-eu-pop-gg-hist-b0" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-eu-pop-gg-hist-b0-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02-PO91Q_files/figure-html/fig-eu-pop-gg-hist-b0-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-eu-pop-gg-hist-b0-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5: Histogram of EU Population (binwidth = 20, boundary = 0)
</figcaption>
</figure>
</div>
</div>
</div>
<p>This has shifted the ticks to the left, but now R has decided to label the x-axis in steps of 25, whereas our bars have a bandwidth of 20. Once again, we have the variable name on the x-axis, instead of a label which anybody could understand. I also prefer “Frequency” on the y-axis, instead of “Count”. To address both of these concerns, we simply add a layer for each. First up are the axis ticks. Our variable is continuous, so we choose the <code>scale_x_continuous</code> option, and tell R to break the axis up into a sequence which starts with zero, ends at 100 and has steps of 20 in between. In the <code>labs</code> argument we adjust the labelling as intended:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>EU) <span class="sc">+</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">mapping=</span><span class="fu">aes</span>(popmio), <span class="at">binwidth =</span> <span class="dv">20</span>, </span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">boundary =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100</span>, <span class="dv">20</span>)) <span class="sc">+</span></span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Population (in million)"</span>, <span class="at">y=</span><span class="st">"Frequency"</span>) <span class="sc">+</span></span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="baser">
<details>
<summary>
Base R Solution
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(EU<span class="sc">$</span>popmio, <span class="at">breaks =</span> <span class="dv">4</span>,</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Population (in million)"</span>, <span class="at">ylab =</span> <span class="st">"Frequency"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
</div>
<div id="fig-his7" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-his7-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/Week 2/his7.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:65.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-his7-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6: Histogram of EU Population with GGPLOT
</figcaption>
</figure>
</div>
<p>I have also removed the background in line with the principles set out by <span class="citation" data-cites="tufte:2001">Tufte (2001, p. 96)</span> by adding <code>theme_classic()</code>. This is it. A graph which can communicate its message independently, and which looks aesthetically pleasing.</p>
<p>In the present case we have the population, so displaying the frequency on the y-axis is sort of sensible, but usually we would be dealing with a sample. Here the count is not very telling and we would be using percentages, instead. Let’s do it!</p>
</section>
<section id="even-more-advanced-graphs" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="even-more-advanced-graphs">Even More Advanced Graphs</h2>
<p>Unfortunately, there is no easy, default way to do this in R, but necessitates a calculation within the <code>ggplot</code> command. Once more we call <code>ggplot</code> and use the <code>EU</code> data set, and select the geom <code>geom_histogram</code>. Again we specify the binwidth as 20 with a boundary of zero, and put <code>popmio</code> on the x-axis. Now comes the point where we need to do something new, because <code>y</code> is not equivalent to the frequency any more, but should be percentage. To achieve this we advise R to put the density there (which is the relative frequency from the the lecture in week 5), and multiply this density by 100 to get percentage. Nothing has changed on the scaling of the x-axis from the previous plot, so we can copy and paste the <code>scale_x_continuous</code> section, as well as the labelling of the x-axis. In this last step, we now also need to adjust the label of the y-axis, because this has now percentage on it, and not frequency. The result is this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> EU) <span class="sc">+</span> </span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">20</span>, <span class="at">boundary =</span> <span class="dv">0</span>,</span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">aes</span>(<span class="at">x=</span> popmio, </span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> (..count..)<span class="sc">/</span><span class="fu">sum</span>(..count..)<span class="sc">*</span><span class="dv">100</span>)) <span class="sc">+</span></span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100</span>, <span class="dv">20</span>)) <span class="sc">+</span></span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Population (in million)"</span>, <span class="at">y=</span><span class="st">"percent"</span>)  <span class="sc">+</span></span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="baser">
<details>
<summary>
Base R Solution
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram data without plotting</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>h <span class="ot">&lt;-</span> <span class="fu">hist</span>(EU<span class="sc">$</span>popmio, </span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100</span>, <span class="at">by =</span> <span class="dv">20</span>), </span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">plot =</span> <span class="cn">FALSE</span>)</span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Normalize counts to percentages</span></span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a>h<span class="sc">$</span>counts <span class="ot">&lt;-</span> h<span class="sc">$</span>counts <span class="sc">/</span> <span class="fu">sum</span>(h<span class="sc">$</span>counts) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb85-8"><a href="#cb85-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-9"><a href="#cb85-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot histogram</span></span>
<span id="cb85-10"><a href="#cb85-10" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(h, </span>
<span id="cb85-11"><a href="#cb85-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">freq =</span> <span class="cn">FALSE</span>, </span>
<span id="cb85-12"><a href="#cb85-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">xlab =</span> <span class="st">"Population (in million)"</span>, </span>
<span id="cb85-13"><a href="#cb85-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">ylab =</span> <span class="st">"percent"</span>, </span>
<span id="cb85-14"><a href="#cb85-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">main =</span> <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
</div>
<div id="fig-his8" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-his8-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/Week 7/his8.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:65.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-his8-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7: Histogram of EU Population with GGPLOT in Percent
</figcaption>
</figure>
</div>
<div class="video">
<p><strong>Jazzy Graphs with GGPLOT</strong></p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Z4KAuOO_iew?si=oMrS0gYs1JnV5dPS" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen="">
</iframe>
</div>
</section>
<section id="organising-code-in-the-rscript" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="organising-code-in-the-rscript">Organising Code in the RScript</h2>
<p>Now is probably a good time to make you aware of how I have been organising code which runs over several lines. I could also have written the code of the last graph as</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> EU) <span class="sc">+</span> </span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">20</span>, <span class="at">boundary =</span> <span class="dv">0</span>, <span class="fu">aes</span>(<span class="at">x=</span> popmio, <span class="at">y =</span> (..count..)<span class="sc">/</span><span class="fu">sum</span>(..count..)<span class="sc">*</span><span class="dv">100</span>)) <span class="sc">+</span> <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100</span>, <span class="dv">20</span>)) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Population"</span>, <span class="at">y=</span><span class="st">"percent"</span>) <span class="sc">+</span> <span class="fu">theme_classic</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>but this would have made it rather difficult to disentangle and to spot the structure of the graph straight away. So it is also a good idea to structure the code in a logical way which allows a reader to understand it as easily as possible. R is very smart in the way it indents the next line after pressing “enter” in an RScript automatically to the appropriate position. You see for example that in</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> EU) <span class="sc">+</span> </span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">20</span>, <span class="at">boundary =</span> <span class="dv">0</span>,</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">aes</span>(<span class="at">x=</span> popmio, </span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> (..count..)<span class="sc">/</span><span class="fu">sum</span>(..count..)<span class="sc">*</span><span class="dv">100</span>)) <span class="sc">+</span></span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100</span>, <span class="dv">20</span>)) <span class="sc">+</span></span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Population (in million)"</span>, <span class="at">y=</span><span class="st">"percent"</span>) <span class="sc">+</span></span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>the <code>aes</code> which belongs to the <code>geom_histogram</code> layer is indented just so it starts flush with the first argument (<code>binwidth</code>) within this layer.</p>
</section>
<section id="exercises" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="exercises">Exercises</h2>
<p>Using these commands, and moving beyond with the help of today’s reading, complete the following tasks:</p>
<ol type="1">
<li>Produce two base-R graphs of different types (e.g.&nbsp;histogram, bar chart, box-and-whisker plot) for separate variables in the EU data set.</li>
<li>Produce two <code>ggplot</code> graphs of different types (e.g.&nbsp;histogram, bar chart, box-and-whisker plot) for separate variables in the EU data set. Google to find more geoms.</li>
</ol>
</section>
<section id="captions-for-tables-and-figures-in-word" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="captions-for-tables-and-figures-in-word">Captions for Tables and Figures in Word</h2>
<p>In essays, your dissertation and in articles, you will have to refer to tables and figures in the text. Now, you can do this by writing “the figure below”. But this is not very elegant. Also, what happens if you change the layout and all of a sudden “the figure below” becomes “the figure above”. This not only causes additional work because you have to edit the text and check all references to tables and figures once you are done (which is tedious beyond description), but there is also the risk that you miss one or a few in the process.</p>
<p>MS Word has a nifty function that allows you to insert captions for figures and tables, and then to insert cross-references into the text which get updated automatically before you send the document to the printer. Here is how to do it:</p>
<p>Say, you have a figure inserted into Word. You now click on it, then hover over the bottom right-hand square, and right-click with your mouse. From the resulting context menu you select “Insert Caption”.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="files/Week 2/insert_caption.png" class="img-fluid figure-img" style="width:60.0%"></p>
<figcaption>Insert caption</figcaption>
</figure>
</div>
<p>This results in the following window:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="files/Week 2/caption.png" class="img-fluid figure-img" style="width:40.0%"></p>
<figcaption>Caption</figcaption>
</figure>
</div>
<p>Select whether the item you want to describe is a figure, or a table. Then make sure you place the caption “below” the item (this is default). Then type your caption into the box at the top, such as “Figure 1: Skewness of Distributions”. Make sure the caption is <strong>telling</strong>. The reader needs to know from the caption what the figure or table is about. When you click OK, the document looks like this:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="files/Week 2/document.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
<p>Now you start writing the text and come to the point where you refer to the figure in question. Here, all you have to do is to select “Insert” and “Cross-Reference”” </p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="files/Week 2/hyperlink.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:30.0%"></p>
</figure>
</div>
<p>and select the following options in the pop-up window:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="files/Week 2/selection.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:30.0%"></p>
</figure>
</div>
<p>Your text will then look like this:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="files/Week 2/text.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:90.0%"></p>
</figure>
</div>
<p>You don’t have to worry now about the sequence of numbering any more. If you insert another figure above this one, and insert a cross-reference in the text again, the sequence is automatically updated and our former “Figure 1” becomes “Figure 2”. Tables and figures have separate sequences of numbering.</p>
<p>One last word on the display of data in tables: <strong><em>DO NOT</em></strong> screenshot tables from R and insert them into your presentations. They look ugly and unprofessional. Make the effort and create a proper table, either in Word or Excel and populate it manually with the data from R. The insertion of captions and cross-references is the same as described above.</p>
</section>
</section>
<section id="exercises-1" class="level1 unnumbered">
<h1 class="unnumbered">Exercises</h1>
<section id="exploring-the-ess-core-exercises" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="exploring-the-ess-core-exercises">Exploring the ESS – Core Exercises</h2>
<ol type="1">
<li>Open the ESS9 dataset in R and attach it.</li>
<li>Identify the variable about “Left-right placement”.
<ol type="a">
<li>Check its formatting in the questionnaire: what do 77, 88 and 99 mean?</li>
<li>What is the level of this variable?</li>
<li>Summarise it with functions <code>class</code>, <code>str</code>, and <code>head</code></li>
<li>What do these functions return?</li>
</ol></li>
<li>Apply the same steps to the variable about the “European unification:”should go further or already gone too far”.
<ol type="a">
<li>Them display the first 20 values of the two variables above</li>
<li>Check the structure of the ‘table’ function and tabulate the two variables</li>
<li>Can you see a major difference between them regarding non positive answers (ie outside proposed scale)?</li>
</ol></li>
<li>Consider the function <code>rm(list=ls())</code>
<ol type="a">
<li>What function <code>rm</code> stand for?</li>
<li>How useful can this function be for future exercises?</li>
</ol></li>
<li>Univariate Statistics and Recoding
<ol type="1">
<li>Calculate the two means, using only valid values (check the <code>mean</code> function beforehand)</li>
<li>In Left-right, regroup values, using three different methods:
<ol type="a">
<li>recode</li>
<li>convert to factor format using <code>as.factor</code></li>
<li>assign value labels using <code>levels</code>
<ul>
<li>0-1 into “far left”</li>
<li>2-3 into “left”,</li>
<li>4-6 into “centre”,</li>
<li>7-8 into “right”</li>
<li>9-10 into “far right”</li>
</ul></li>
</ol></li>
</ol></li>
</ol>
</section>
<section id="exploring-the-ess-going-further" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="exploring-the-ess-going-further">Exploring the ESS – Going Further</h2>
<ol type="1">
<li>Using the new, transformed variables:
<ol type="a">
<li>Calculate means in the UK only. You may use the <code>[variable == "value"]</code> subscript</li>
<li>How does this mean compare with the average in Europe? and with France?</li>
<li>Present the frequencies and means of these three samples in one unique table</li>
<li>Install and load the <code>questionr</code> package. Use its function ‘freq’ to calculate the same as above, but with percentages.</li>
<li>Compare deviations from the mean in the UK and Germany using the function <code>abs</code> (absolute value, which means any value with all negative signs deleted)</li>
<li>Compare mean, median, mode, variance and standard deviation in the UK and Germany</li>
</ol></li>
<li>Try 3 or more kinds or graphs with these two variables separately, using the most appropriate of original or transformed values. Assess and compare the relevance of each graph</li>
<li>Tabulate the two variables in original format against each other using table(X,Y). Interpret the output.</li>
<li>Repeat this with the transformed format: Interpret the output.</li>
<li>Try the same using <code>questionr::cprop</code></li>
<li>Graph the two variables against each other using ‘plot’ (make sure you choose the right versions of the variables). What can you conclude from this graph?</li>
</ol>
</section>
</section>
<section id="homework-for-week-3" class="level1 unnumbered">
<h1 class="unnumbered">Homework for Week 3</h1>
<ul>
<li>Finish working through this worksheet.</li>
<li>Add a note underneath each code chunk in your RScript (by starting the line with <code>#</code>), translating the code into plain English.</li>
<li>Read the required literature for week 3.</li>
<li>Work through <a href="https://drfloreiche.github.io/PO91Q/02-PO91Q.html#flashcards">this week’s flashcards</a> to familiarise yourself with the relevant R functions.</li>
<li>Find an example for each NEW function and apply it in R to ensure it works.</li>
</ul>
</section>
<section id="glossary" class="level1 unnumbered">
<h1 class="unnumbered">Glossary</h1>
<p>&nbsp;</p>
<div class="glossary-table">
<div class="cell" data-tbl-colwidths="[25,75]">
<div id="tbl-glossary2" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-tbl-colwidths="[25,75]">
<figure class="quarto-float quarto-float-tbl figure">
<div aria-describedby="tbl-glossary2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="cell table table-sm table-striped small">
<colgroup>
<col style="width: 25%">
<col style="width: 75%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Term</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">categorical</td>
<td style="text-align: left;">Describing the qualitative categories of a characteristic, for example different religions</td>
</tr>
<tr class="even">
<td style="text-align: left;">constant</td>
<td style="text-align: left;">A variable which does not vary</td>
</tr>
<tr class="odd">
<td style="text-align: left;">continuous</td>
<td style="text-align: left;">Can assume any value within defined measurement boundaries</td>
</tr>
<tr class="even">
<td style="text-align: left;">descriptive statistics</td>
<td style="text-align: left;">Summarise information about the centre and variability of a variable</td>
</tr>
<tr class="odd">
<td style="text-align: left;">deviation</td>
<td style="text-align: left;">The deviation <span class="math inline">\(d\)</span> of an observation <span class="math inline">\(y_{i}\)</span> from the sample mean <span class="math inline">\(\bar{y}\)</span> is the difference between them: <span class="math inline">\(d=y_{i}-\bar{y}\)</span></td>
</tr>
<tr class="even">
<td style="text-align: left;">dichotomous</td>
<td style="text-align: left;">Can only assume two mutually exclusive, but internally homogeneous qualitative categories</td>
</tr>
<tr class="odd">
<td style="text-align: left;">discrete</td>
<td style="text-align: left;">The result of a counting process</td>
</tr>
<tr class="even">
<td style="text-align: left;">histogram</td>
<td style="text-align: left;">Displays through rectangles the frequency with which the values of a continuous variable occur in specific ranges</td>
</tr>
<tr class="odd">
<td style="text-align: left;">interquartile range</td>
<td style="text-align: left;">The difference between the 3<span class="math inline">\(^{\text{rd}}\)</span> and the 1<span class="math inline">\(^{\text{st}}\)</span> quartiles</td>
</tr>
<tr class="even">
<td style="text-align: left;">mean</td>
<td style="text-align: left;">Is equal to the sum of the observations divided by the number of observations</td>
</tr>
<tr class="odd">
<td style="text-align: left;">median</td>
<td style="text-align: left;">Separates the lower half from the upper half of observations</td>
</tr>
<tr class="even">
<td style="text-align: left;">mode</td>
<td style="text-align: left;">Is the most frequently occurring value</td>
</tr>
<tr class="odd">
<td style="text-align: left;">percentile</td>
<td style="text-align: left;">In ordered data, the percentile refers to the value of a variable below which a certain proportion of observations falls</td>
</tr>
<tr class="even">
<td style="text-align: left;">outlier</td>
<td style="text-align: left;">Defined as a value larger than the third quartile plus 1.5 times the interquartile range, or the first quartile minus 1.5 times the interquartile range</td>
</tr>
<tr class="odd">
<td style="text-align: left;">quartile</td>
<td style="text-align: left;">Divides ordered data into four equal parts and indicates the percentage of observations that falls into the respective quartile and below</td>
</tr>
<tr class="even">
<td style="text-align: left;">range</td>
<td style="text-align: left;">The difference between the largest and the smallest observation</td>
</tr>
<tr class="odd">
<td style="text-align: left;">standard deviation</td>
<td style="text-align: left;">The standard deviation s is defined as <span class="math display">\[\begin{equation*}s=\sqrt{\frac{\text{sum of squared deviations}}{\text{sample size} -1}}=\sqrt{\frac{\Sigma(y_{i} - \bar{y})^2}{n-1}}\end{equation*}\]</span></td>
</tr>
<tr class="even">
<td style="text-align: left;">variance</td>
<td style="text-align: left;">Is equal to the squared standard deviation</td>
</tr>
</tbody>
</table>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-tbl" id="tbl-glossary2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2: Glossary Week 2
</figcaption>
</figure>
</div>
</div>
</div>
<p>&nbsp;</p>
</section>
<section id="flashcards" class="level1 unnumbered">
<h1 class="unnumbered">Flashcards</h1>
<div class="flashcard">
<details>
<summary>
New Functions This Week
</summary>
<div style="padding-bottom:56.25%; position:relative; display:block; width: 100%">
<p><iframe width="100%" height="100%" src="files/flashcards/PO91Q_Week 2_New.html" frameborder="0" allowfullscreen="" style="position:absolute; top:0; left: 0"> </iframe></p>
</div>
<p>
&nbsp;
</p>
The data are available as a <a href="files/excelfiles/PO91Q_Week 2_New.csv">.csv file</a>.
</details>
</div>
<div class="flashcard">
<details>
<summary>
R Functions This Week
</summary>
<div style="padding-bottom:56.25%; position:relative; display:block; width: 100%">
<p><iframe width="100%" height="100%" src="files/flashcards/PO91Q_Week 2_All.html" frameborder="0" allowfullscreen="" style="position:absolute; top:0; left: 0"> </iframe></p>
</div>
<p>
&nbsp;
</p>
The data are available as a <a href="files/excelfiles/PO91Q_Week 2_All.csv">.csv file</a>.
</details>
</div>
<div class="flashcard">
<details>
<summary>
All R Functions So Far
</summary>
<div style="padding-bottom:56.25%; position:relative; display:block; width: 100%">
<p><iframe width="100%" height="100%" src="files/flashcards/PO91Q_Week 2_Consolidate.html" frameborder="0" allowfullscreen="" style="position:absolute; top:0; left: 0"> </iframe></p>
</div>
<p>
&nbsp;
</p>
The data are available as a <a href="files/excelfiles/PO91Q_Week 2_Consolidate.csv">.csv file</a>.
</details>
</div>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" data-line-spacing="2" role="list" style="display: none">
<div id="ref-reiche:forthcoming" class="csl-entry" role="listitem">
Reiche, F. (forthcoming). <em><span class="nocase">Introduction to Quantitative Methods in the Social Sciences</span></em>. Oxford: Oxford University Press.
</div>
<div id="ref-tufte:2001" class="csl-entry" role="listitem">
Tufte, E. R. (2001). <em><span class="nocase">The Visual Display of Quantitative Information</span></em> (Second Edition). Cheshire, Conn: Graphics Press. <a href="https://doi.org/10.1198/tech.2002.s78">https://doi.org/10.1198/tech.2002.s78</a>
</div>
</div>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>These questions are taken from <span class="citation" data-cites="reiche:forthcoming">Reiche (forthcoming)</span>.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>https://cran.r-project.org/web/packages/<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>There is a command called <code>order()</code>, but it is not part of the <code>tidyverse</code>, and as this package is steadily on the rise in coding, I am only showing you this here.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const buttons = document.querySelectorAll(".delayed-download");

    buttons.forEach(function (btn) {
      const releaseDate = new Date(btn.dataset.date);
      const now = new Date();

      if (now >= releaseDate) {
        btn.classList.remove("disabled");
        btn.setAttribute("aria-disabled", "false");
        btn.setAttribute("href", btn.dataset.path);
        btn.setAttribute("download", btn.dataset.path.split('/').pop());
        btn.innerHTML = btn.dataset.label || "📄 Download Document";
      }
    });
  });
</script>
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/drfloreiche\.github\.io\/PO91Q\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./01-PO91Q.html" class="pagination-link" aria-label="Week 1">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-title">Week 1</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./03-PO91Q.html" class="pagination-link" aria-label="Week 3">
        <span class="nav-page-text"><span class="chapter-title">Week 3</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>